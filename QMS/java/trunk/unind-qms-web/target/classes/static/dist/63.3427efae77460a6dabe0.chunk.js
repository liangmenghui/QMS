webpackJsonp([63],{1018:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(1576),r=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);var i=a(1739),l=a.n(i),n=a(1),d=n(r.a,l.a,!1,null,null,null);d.options.__file="src\\view\\member\\pmp\\tsr\\index.vue",e.default=d.exports},1576:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(11),s=o(r),i=a(15),l=o(i);e.default={data:function(){var t=this;return{formQuery:{},formQuery1:{},dialog:{ruleForm:{bsItemNum:[{required:!0,message:"请填写物料编码",trigger:"blur"}],bsCustomerNum:[{required:!0,message:"请填写客户部件号",trigger:"blur"}]},modal_dialog:!1,formItem:{bsTransTime:1,bsWeekDay:0}},dialog2:{ruleForm2:{bsTransportCode:[{required:!0,message:"请填写运输路线代码",trigger:"blur"}]},modal_dialog2:!1,formItem2:{}},datagrid1:{queryParams:{page:1,rows:10},pagination:[10,20,50,100],data:{rows:[],total:0},columns:[{title:"运输路线代码",key:"bsTransportCode"},{title:"运输路线名称",key:"bsTransportName"},{title:"运输路线描述",key:"bsTransportDesc"},{title:"操作",key:"action",render:function(e,a){var o=[];return o.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showBoundDialog(a)}}},"绑定")),o.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditDialog(a)}}},"编辑")),e("div",o)}}]},datagrid2:{queryParams:{page:1,rows:10},pagination:[10,20,50,100],data:{rows:[],total:0},columns:[{title:"物料编码",key:"bsItemNum"},{title:"客户部件号",key:"bsCustomerNum"},{title:"运输周期",key:"bsTransTime"},{title:"出货星期",key:"bsWeekDay",render:function(t,e){return 0==e.row.bsWeekDay?t("span","星期日"):1==e.row.bsWeekDay?t("span","星期一"):2==e.row.bsWeekDay?t("span","星期二"):3==e.row.bsWeekDay?t("span","星期三"):4==e.row.bsWeekDay?t("span","星期四"):5==e.row.bsWeekDay?t("span","星期五"):6==e.row.bsWeekDay?t("span","星期六"):t("span","Unknown")}},{title:"操作",key:"action",render:function(e,a){var o=[];return o.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditDetailDialog(a)}}},"编辑")),o.push(e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.deleteDetail(a)}}},"删除")),e("div",o)}}]}}},created:function(){this.getData(),this.getData2()},methods:{handleSubmit1:function(t){this.getData()},handleSubmit2:function(t){this.getData2()},getData:function(){var t=this;(0,l.default)(this.formQuery,this.datagrid1.queryParams),console.log("after===>"),console.log(this.formQuery),this.api.tsr.gettranlist(this.formQuery).then(function(e){console.log("get list===>"),console.log(e.data),e.result?t.datagrid1.data=e.data:t.$Message.error(e.msg)})},rowClick:function(t,e){console.log(t.bsTransportCode),this.formQuery1.bsTransportCode=t.bsTransportCode,this.getData2()},getData2:function(){var t=this;(0,l.default)(this.formQuery1,this.datagrid2.queryParams),console.log("mayi===>"),console.log(this.formQuery1),this.api.tsr.getdetaillist(this.formQuery1).then(function(e){console.log("get list===>"),console.log(e.data),e.result?t.datagrid2.data=e.data:t.$Message.error(e.msg)})},reloadData:function(){this.datagrid1.data=this.getData()},changePage:function(t){this.datagrid1.queryParams.page=t,this.datagrid1.data=this.getData()},changePageSize:function(t){this.datagrid1.queryParams.rows=t,this.datagrid1.data=this.getData()},changePage2:function(t){this.datagrid2.queryParams.page=t,this.datagrid2.data=this.getData2()},changePageSize2:function(t){this.datagrid2.queryParams.rows=t,this.datagrid2.data=this.getData()},showBoundDialog:function(t){console.log(t),this.dialog.modal_dialog=!0,this.dialog.formItem.id=null,this.dialog.formItem.bsTransportCode=t.row.bsTransportCode},showEditDetailDialog:function(t){console.log(t),this.dialog.modal_dialog=!0,this.dialog.formItem.bsTransportCode=t.row.bsTransportCode;var e=t.row;this.dialog.formItem={id:e.id,bsTransportCode:e.bsTransportCode,bsInventoryItemId:e.bsInventoryItemId,bsCustomerNum:e.bsCustomerNum,bsItemNum:e.bsItemNum,bsWeekDay:e.bsWeekDay,bsTransTime:e.bsTransTime}},showAddDialog:function(){this.dialog2.modal_dialog2=!0,this.dialog2.formItem2.id=null},showEditDialog:function(t){this.dialog2.modal_dialog2=!0;var e=t.row;this.dialog2.formItem2={id:e.id,bsTransportCode:e.bsTransportCode,bsTransportName:e.bsTransportName,bsTransportDesc:e.bsTransportDesc}},addDetailCancel:function(){this.dialog.modal_dialog=!1,this.$refs["dialog.formItem"].resetFields()},addDetail:function(t){var e=this;this.$refs["dialog.formItem"].validate(function(a){a?void 0!=(0,s.default)(e.dialog.formItem.id)&&"number"==typeof e.dialog.formItem.id?(console.log("编辑1"),e.api.tsr.editDetail(t).then(function(t){t.result?(e.dialog.modal_dialog=!1,e.$refs["dialog.formItem"].resetFields(),e.datagrid2.data=e.getData2()):e.$Message.info(t.msg)})):(console.log("新增1"),e.api.tsr.addDetail(t).then(function(t){t.result?(e.dialog.modal_dialog=!1,e.$refs["dialog.formItem"].resetFields(),e.datagrid2.data=e.getData2()):e.$Message.info(t.msg)})):e.$Message.error("表单验证失败!")})},addCancel:function(){this.dialog2.modal_dialog2=!1,this.$refs["dialog2.formItem2"].resetFields()},deleteDetail:function(t){var e=this;console.log(t),this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",loading:!0,onOk:function(){e.api.tsr.deleteDetail({id:t.row.id}).then(function(t){console.log(t),t.result?(e.datagrid2.data=e.getData2(),e.$Message.info("删除成功"),e.$Modal.remove()):e.$Message.error(t.msg)})}})},ok:function(){var t=this;console.log("this.dialog2.formItem2====>"+(0,s.default)(this.dialog2.formItem2.id)),this.$refs["dialog2.formItem2"].validate(function(e){e?void 0!=(0,s.default)(t.dialog2.formItem2.id)&&"number"==typeof t.dialog2.formItem2.id?(console.log("编辑1"),t.api.tsr.edit(t.dialog2.formItem2).then(function(e){e.result?(t.dialog2.modal_dialog2=!1,t.$refs["dialog2.formItem2"].resetFields(),t.datagrid.data=t.getData()):t.$Message.error(e.msg)})):(console.log("新增1"),t.api.tsr.add(t.dialog2.formItem2).then(function(e){e.result?(t.dialog2.modal_dialog2=!1,t.$refs["dialog2.formItem2"].resetFields(),t.datagrid.data=t.getData()):t.$Message.error(e.msg)})):t.$Message.error("表单验证失败!")})}}}},1739:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("div",{staticStyle:{height:"450px","margin-top":"10px"}},[a("div",{staticStyle:{width:"49%",float:"left"}},[a("i-col",[a("Form",{ref:"formQuery",staticClass:"query_area",attrs:{model:t.formQuery,inline:""}},[a("Form-item",{attrs:{prop:"bsTransportCode"}},[a("Input",{attrs:{type:"text",placeholder:"运输路线代码"},model:{value:t.formQuery.bsTransportCode,callback:function(e){t.$set(t.formQuery,"bsTransportCode",e)},expression:"formQuery.bsTransportCode"}})],1),t._v(" "),a("Form-item",{attrs:{prop:"bsTransportName"}},[a("Input",{attrs:{type:"text",placeholder:"运输路线名称"},model:{value:t.formQuery.bsTransportName,callback:function(e){t.$set(t.formQuery,"bsTransportName",e)},expression:"formQuery.bsTransportName"}})],1),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit1("formQuery")}}},[t._v("查 询")])],1),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showAddDialog()}}},[t._v("新 增")])],1)],1)],1),t._v(" "),a("i-col",[a("Table",{attrs:{"highlight-row":"",data:t.datagrid1.data.rows,columns:t.datagrid1.columns,stripe:"",height:"650"},on:{"on-row-click":t.rowClick}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.datagrid1.data.total,current:1,"page-size":t.datagrid1.queryParams.rows,"page-size-opts":t.datagrid1.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])],1)],1),t._v(" "),a("div",{staticStyle:{width:"49%",float:"left","margin-left":"2%"}},[a("i-col",[a("Form",{ref:"formQuery1",staticClass:"query_area",attrs:{model:t.formQuery1,inline:""}},[a("Form-item",{attrs:{prop:"bsItemNum"}},[a("Input",{attrs:{type:"text",placeholder:"物料编码"},model:{value:t.formQuery1.bsItemNum,callback:function(e){t.$set(t.formQuery1,"bsItemNum",e)},expression:"formQuery1.bsItemNum"}})],1),t._v(" "),a("Form-item",{attrs:{prop:"bsCustomerNum"}},[a("Input",{attrs:{type:"text",placeholder:"客户部件号"},model:{value:t.formQuery1.bsCustomerNum,callback:function(e){t.$set(t.formQuery1,"bsCustomerNum",e)},expression:"formQuery1.bsCustomerNum"}})],1),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit2("formQuery1")}}},[t._v("查 询")])],1),t._v(" "),a("Form-item",{attrs:{prop:"bsTransportCode"}},[a("Input",{attrs:{type:"hidden",placeholder:"运输路线代码"},model:{value:t.formQuery1.bsTransportCode,callback:function(e){t.$set(t.formQuery1,"bsTransportCode",e)},expression:"formQuery1.bsTransportCode"}})],1),t._v(" "),a("Form-item",{attrs:{prop:"bsInventoryItemId"}},[a("Input",{attrs:{type:"hidden",placeholder:"供应商"},model:{value:t.formQuery1.bsInventoryItemId,callback:function(e){t.$set(t.formQuery1,"bsInventoryItemId",e)},expression:"formQuery1.bsInventoryItemId"}})],1)],1)],1),t._v(" "),a("i-col",[a("Table",{attrs:{data:t.datagrid2.data.rows,columns:t.datagrid2.columns,stripe:"",height:"650"}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.datagrid2.data.total,current:1,"page-size":t.datagrid2.queryParams.rows,"page-size-opts":t.datagrid2.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage2,"on-page-size-change":t.changePageSize2}})],1)])],1)],1)])]),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,closable:!1,title:""},model:{value:t.dialog.modal_dialog,callback:function(e){t.$set(t.dialog,"modal_dialog",e)},expression:"dialog.modal_dialog"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.addDetailCancel()}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.addDetail(t.dialog.formItem)}}},[t._v("确定")])],1),t._v(" "),a("Form",{ref:"dialog.formItem",attrs:{model:t.dialog.formItem,rules:t.dialog.ruleForm,"label-width":100}},[a("Input",{attrs:{type:"hidden"},model:{value:t.dialog.formItem.id,callback:function(e){t.$set(t.dialog.formItem,"id",e)},expression:"dialog.formItem.id"}}),t._v(" "),a("Form-item",{attrs:{label:"运输路线代码"}},[a("Input",{attrs:{disabled:"",placeholder:"请输入"},model:{value:t.dialog.formItem.bsTransportCode,callback:function(e){t.$set(t.dialog.formItem,"bsTransportCode",e)},expression:"dialog.formItem.bsTransportCode"}})],1),t._v(" "),a("Form-item",{attrs:{label:"物料编码",prop:"bsItemNum"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsItemNum,callback:function(e){t.$set(t.dialog.formItem,"bsItemNum",e)},expression:"dialog.formItem.bsItemNum"}})],1),t._v(" "),a("Form-item",{attrs:{label:"客户部件号",prop:"bsCustomerNum"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsCustomerNum,callback:function(e){t.$set(t.dialog.formItem,"bsCustomerNum",e)},expression:"dialog.formItem.bsCustomerNum"}})],1),t._v(" "),a("Form-item",{attrs:{label:"运输周期",prop:"bsTransTime"}},[a("Input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsTransTime,callback:function(e){t.$set(t.dialog.formItem,"bsTransTime",e)},expression:"dialog.formItem.bsTransTime"}})],1),t._v(" "),a("Form-item",{attrs:{label:"出货星期",prop:"bsWeekDay"}},[a("Select",{attrs:{placeholder:"请选择"},model:{value:t.dialog.formItem.bsWeekDay,callback:function(e){t.$set(t.dialog.formItem,"bsWeekDay",e)},expression:"dialog.formItem.bsWeekDay"}},[a("Option",{attrs:{value:0}},[t._v("星期日")]),t._v(" "),a("Option",{attrs:{value:1}},[t._v("星期一")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("星期二")]),t._v(" "),a("Option",{attrs:{value:3}},[t._v("星期三")]),t._v(" "),a("Option",{attrs:{value:4}},[t._v("星期四")]),t._v(" "),a("Option",{attrs:{value:5}},[t._v("星期五")]),t._v(" "),a("Option",{attrs:{value:6}},[t._v("星期六")])],1)],1)],1)],1),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,closable:!1},model:{value:t.dialog2.modal_dialog2,callback:function(e){t.$set(t.dialog2,"modal_dialog2",e)},expression:"dialog2.modal_dialog2"}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.addCancel()}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.ok()}}},[t._v("确定")])],1),t._v(" "),a("Form",{ref:"dialog2.formItem2",attrs:{model:t.dialog2.formItem2,rules:t.dialog2.ruleForm2,"label-width":100}},[a("Input",{attrs:{type:"hidden"},model:{value:t.dialog2.formItem2.id,callback:function(e){t.$set(t.dialog2.formItem2,"id",e)},expression:"dialog2.formItem2.id"}}),t._v(" "),a("Form-item",{attrs:{label:"运输路线代码",prop:"bsTransportCode"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog2.formItem2.bsTransportCode,callback:function(e){t.$set(t.dialog2.formItem2,"bsTransportCode",e)},expression:"dialog2.formItem2.bsTransportCode"}})],1),t._v(" "),a("Form-item",{attrs:{label:"运输路线名称",prop:"bsTransportName"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog2.formItem2.bsTransportName,callback:function(e){t.$set(t.dialog2.formItem2,"bsTransportName",e)},expression:"dialog2.formItem2.bsTransportName"}})],1),t._v(" "),a("Form-item",{attrs:{label:"运输路线描述",prop:"bsTransportDesc"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog2.formItem2.bsTransportDesc,callback:function(e){t.$set(t.dialog2.formItem2,"bsTransportDesc",e)},expression:"dialog2.formItem2.bsTransportDesc"}})],1)],1)],1)],1)},r=[];o._withStripped=!0;var s={render:o,staticRenderFns:r};e.default=s}});