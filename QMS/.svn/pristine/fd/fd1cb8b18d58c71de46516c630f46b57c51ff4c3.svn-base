webpackJsonp([64],{1191:function(t,e,a){"use strict";function r(t){d||a(2078)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(1906),o=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var n=a(2080),l=a.n(n),d=!1,u=a(1),_=r,c=u(o.a,l.a,!1,_,null,null);c.options.__file="src/view/member/pmp/forecast/index.vue",e.default=c.exports},1906:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s,o=a(3),i=r(o),n=a(11),l=r(n),d=a(72),u=r(d),_=a(98);e.default={data:function(){var t=this;return{customers:[{label:"All",value:""},{label:"Whirlpool EZ-ISM Production",value:"WHIRLPPOL"},{label:"Electrolux Major Appliances North America",value:"ELECTROLUX-NA"}],file:"",formQuery:{bsCustomer:"",bsBatchNo:"",bsPartNo:""},partNoDetailDialog:{modal_dialog:!1,batchId:"",formItem:{},ruleForm:{}},dialog:{modal_dialog:!1,formItem:{},ruleForm:{bsPartNo:[{required:!0,message:"请填写部件号",trigger:"blur"}],bsDateOf:[{required:!0,message:"请填写日期",trigger:"blur"}],bsQuantity:[{required:!0,message:"请填写数量",trigger:"blur"}]}},datagrid:{queryParams:{page:1,rows:25,pkParent:-1},pagination:[25,50,100],data:{rows:[],total:0},columns:[{title:"批次号",key:"bsBatchNo"},{title:"部件号",key:"bsPartNo",render:function(e,a){return e("a",{on:{click:function(){t.showPartNoDetailDialog(a)}}},a.row.bsPartNo)}},{title:"日期",key:"bsDateOf"},{title:"数量",key:"bsQuantity"},{title:"创建时间",key:"bsCreatedTime"},{title:"更新时间",key:"bsModifiedTime"},{title:"操作",key:"action",render:function(e,a){var r=[];return t.menuData.perms.EDIT&&r.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditDialog(a)}}},"编辑")),t.menuData.perms.DELETE&&r.push(e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.delete(a)}}},"删除")),e("div",r)}}]}}},created:function(){},computed:(0,u.default)({},(0,_.mapState)({menuData:function(t){return t.menuData}})),methods:(s={handleSubmit:function(t){this.getData()},getData:function(){var t=this;(0,l.default)(this.formQuery,this.datagrid.queryParams),this.api.forecast.getlist(this.formQuery).then(function(e){e.result?t.datagrid.data=e.data:t.$Message.error(e.msg)})},reloadData:function(){this.datagrid.data=this.getData()},changePage:function(t){this.datagrid.queryParams.page=t,this.datagrid.data=this.getData()},edit:function(t){var e=this;this.api.forecast.edit(t.row).then(function(t){t.result?e.reloadData():e.$Message.error(t.msg)})},delete:function(t){var e=this;this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",loading:!0,onOk:function(){e.api.forecast.delete({id:t.row.id}).then(function(t){t.result?(e.reloadData(),e.$Message.info("删除成功"),e.$Modal.remove()):e.$Message.error(t.msg)})}})},showAddDialog:function(){this.dialog.modal_dialog=!0,this.file="",this.dialog.formItem={}},showEditDialog:function(t){this.dialog.modal_dialog=!0;var e=t.row;this.dialog.formItem={id:e.id}},ok:function(){var t=this,e=new FormData;e.append("bsCustomer",this.dialog.formItem.bsCustomer),e.append("file",this.file),this.api.forecast.upload(e).then(function(e){e.result?t.reloadData():t.$Message.error(e.msg)})},cancel:function(){},handleUpload:function(t){return this.file=t,!1},handlePartNoDetailOk:function(){},handlePartNoDetailCancel:function(){}},(0,i.default)(s,"handleUpload",function(t){return this.file=t,!1}),(0,i.default)(s,"handleUpload111",function(t){var e=this;this.file=t;var a=new FormData;return a.append("bsCustomer",this.formQuery.bsCustomer),a.append("file",this.file),this.api.forecast.upload(a).then(function(t){t.result?e.reloadData():e.$Message.error(t.msg)}),!1}),(0,i.default)(s,"handleExport",function(){window.open("/admin/forecast/download?bsCustomer=&bsBatchNo="+this.formQuery.bsBatchNo)}),(0,i.default)(s,"handleHistoryExport",function(){window.open("/admin/forecast/history/download?id="+this.partNoDetailDialog.batchId)}),s)}},2078:function(t,e,a){var r=a(2079);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(21)("5f2fe13e",r,!1)},2079:function(t,e,a){e=t.exports=a(20)(!1),e.push([t.i,"\na:hover {\n  text-decoration: underline;\n}\n.h-table {\n  width: 100%;\n  empty-cells: show;\n  border-collapse: collapse;\n  margin: 0 auto;\n}\n.h-table td {\n  border: 1px solid #cad9ea;\n  background: #fff;\n  text-align: center;\n  vertical-align: middle;\n}\n",""])},2080:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("i-col",[a("Form",{ref:"formQuery",staticClass:"query_area",attrs:{model:t.formQuery,inline:""}},[a("Form-item",{staticStyle:{width:"250px"},attrs:{prop:"bsCustomer",label:"客户"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formQuery.bsCustomer,callback:function(e){t.$set(t.formQuery,"bsCustomer",e)},expression:"formQuery.bsCustomer"}},t._l(t.customers,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{prop:"bsBatchNo"}},[a("Input",{attrs:{type:"text",placeholder:"批次号"},model:{value:t.formQuery.bsBatchNo,callback:function(e){t.$set(t.formQuery,"bsBatchNo",e)},expression:"formQuery.bsBatchNo"}})],1),t._v(" "),a("Form-item",{attrs:{prop:"bsPartNo"}},[a("Input",{attrs:{type:"text",placeholder:"部件号"},model:{value:t.formQuery.bsPartNo,callback:function(e){t.$set(t.formQuery,"bsPartNo",e)},expression:"formQuery.bsPartNo"}})],1),t._v(" "),t.menuData.perms.QUERY?a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formQuery")}}},[t._v("查 询")])],1):t._e(),t._v(" "),t.menuData.perms.ADD?a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showAddDialog()}}},[t._v("新 增")])],1):t._e(),t._v(" "),t.menuData.perms.IMPORT?a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showAddDialog()}}},[t._v("导 入")])],1):t._e(),t._v(" "),t.menuData.perms.EXPORT?a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:t.handleExport}},[t._v("导 出")])],1):t._e()],1)],1)],1),t._v(" "),a("Row",[a("i-col",{staticStyle:{padding:"1px"},attrs:{span:"24"}},[a("Table",{attrs:{data:t.datagrid.data.rows,columns:t.datagrid.columns,stripe:"",height:"700"}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.datagrid.data.total,current:1,"page-size":t.datagrid.queryParams.rows,"page-size-opts":t.datagrid.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage}})],1)])],1)],1),t._v(" "),a("Modal",{attrs:{title:"batch import"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.dialog.modal_dialog,callback:function(e){t.$set(t.dialog,"modal_dialog",e)},expression:"dialog.modal_dialog"}},[a("p",[a("Form",{ref:t.dialog.ruleForm,attrs:{model:t.dialog.formItem,rules:t.dialog.ruleForm,"label-width":80}},[a("Form-item",{attrs:{label:"客户",prop:"bsCustomer"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.dialog.formItem.bsCustomer,callback:function(e){t.$set(t.dialog.formItem,"bsCustomer",e)},expression:"dialog.formItem.bsCustomer"}},t._l(t.customers,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"文件"}},[a("Upload",{attrs:{multiple:"",type:"drag","before-upload":t.handleUpload}},[null!==this.file?a("div",{staticStyle:{padding:"20px 0"}},[t._v("Upload file: "+t._s(this.file.name)+" ")]):t._e(),t._v(" "),null===this.file?a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),t._v(" "),a("p",[t._v("Click or drag files here to upload")])],1):t._e()])],1)],1)],1)]),t._v(" "),a("Modal",{style:{top:"20px"},attrs:{title:"Part No History",width:"760"},on:{"on-ok":t.handlePartNoDetailOk,"on-cancel":t.handlePartNoDetailCancel},model:{value:t.partNoDetailDialog.modal_dialog,callback:function(e){t.$set(t.partNoDetailDialog,"modal_dialog",e)},expression:"partNoDetailDialog.modal_dialog"}},[a("Tabs",[t._l(t.partNoDetails,function(e){return a("TabPane",{key:e,attrs:{label:e.whirlpool.bsBatchNo}},[a("div",[a("table",{staticClass:"h-table"},[a("tr",[a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("VENDOR NO."),a("br"),t._v(t._s(e.whirlpool.bsVendorNo))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("P.O. NUMBR"),a("br"),t._v(t._s(e.whirlpool.bsPoNo))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("RLSE NO."),a("br"),t._v(t._s(e.whirlpool.bsRlseNo))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("RELEASE DATE"),a("br"),t._v(t._s(e.whirlpool.bsReleaseDate))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("REVISION"),a("br"),t._v(t._s(e.whirlpool.bsRevision))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("REVISION EFFECTIVE"),a("br"),t._v(t._s(e.whirlpool.bsRevisionEffective))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("UNIT OF MEAS"),a("br"),t._v(t._s(e.whirlpool.bsUnitOfMeas))])],1)])]),t._v(" "),a("table",{staticClass:"h-table"},[a("tr",[a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("PART NUMBER"),a("br"),t._v(t._s(e.whirlpool.bsPartNo))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("PART DESCRIPTION"),a("br"),t._v(t._s(e.whirlpool.bsPartDescription))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("VENDOR PART NUMBER"),a("br"),t._v(t._s(e.whirlpool.bsVendorPartNo))])],1)])]),t._v(" "),a("table",{staticClass:"h-table"},[a("tr",[a("td",{attrs:{align:"center",colspan:"3"}},[a("Font",{attrs:{size:"2"}},[t._v("LAST SHIPMENT RECEIVED")])],1),t._v(" "),0==e.whirlpool.bsAsnQty?a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("ASN NET: NO")])],1):a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("ASN NET: NO ")])],1),t._v(" "),0==e.whirlpool.bsConsigmentQty?a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("CONSIGN NET: NO")])],1):a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("CONSIGN NET: YES")])],1)]),t._v(" "),a("tr",[a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("DATE"),a("br"),t._v(t._s(e.whirlpool.bsLastReceivedDate))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("QUANTITY"),a("br"),t._v(t._s(e.whirlpool.bsLastReceivedQty))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("ACCUM RECPTS"),a("br"),t._v(t._s(e.whirlpool.bsLastReceivedAccum))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("ASN QTY"),a("br"),t._v(t._s(e.whirlpool.bsAsnQty))])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("Font",{attrs:{size:"2"}},[t._v("CONSIGNMENT QTY"),a("br"),t._v(t._s(e.whirlpool.bsConsigmentQty))])],1)])]),t._v(" "),a("Font",{attrs:{size:"2"}},[t._v("AFTER LAST SHIPMENT CONSIDERED FABRICATE & SHIP TO ARRIVE AS SPECIFIED BELOW")]),t._v(" "),a("table",{staticClass:"h-table"},[a("tr",[a("td",[a("Font",{attrs:{size:"2"}},[t._v("WEEK"),a("br"),t._v("OF")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("WEEKLY"),a("br"),t._v("QUANTITIES")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("ACCUM"),a("br"),t._v("QUANTITIES")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Monday")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Tuesday")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Wednesday")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Thursday")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Friday")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Saturday")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v("Sunday")])],1)]),t._v(" "),a("tr",[a("td",[a("Font",{attrs:{size:"2"}},[t._v("Past Due")])],1),t._v(" "),a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.whirlpool.bsPastWeeklyQty)+"  ")])],1),t._v(" "),a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.whirlpool.bsPastAccumQty)+"  ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1)]),t._v(" "),t._l(e.entries,function(e){return a("tr",{key:e},[a("td",[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsWeekOf))])],1),t._v(" "),e.bsQuantity>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsQuantity)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsAccumQty>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsAccumQty)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsMonday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsMonday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsTuesday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsTuesday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsWednesday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsWednesday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsThursday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsThursday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsFriday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsFriday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsSaturday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsSaturday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1),t._v(" "),e.bsSunday>0?a("td",{attrs:{align:"right"}},[a("Font",{attrs:{size:"2"}},[t._v(t._s(e.bsSunday)+"  ")])],1):a("td",[a("Font",{attrs:{size:"2"}},[t._v(" ")])],1)])})],2)],1)])}),t._v(" "),a("Button",{attrs:{slot:"extra",type:"primary",size:"default"},on:{click:t.handleHistoryExport},slot:"extra"},[t._v("导出")])],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},s=[];r._withStripped=!0;var o={render:r,staticRenderFns:s};e.default=o}});