webpackJsonp([55],{1234:function(t,e,o){"use strict";function s(t){l||o(2228)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1969),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);var r=o(2230),p=o.n(r),l=!1,d=o(1),c=s,u=d(i.a,p.a,!1,c,null,null);u.options.__file="src/views/qms/view/feedback/FeedbackReport.vue",e.default=u.exports},1969:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(11),a=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={data:function(){return{form:{bsStatus:1,bsType:1,bsSuppCompanyName:""},products:[],suppliers:[],file:{},fileList:[]}},created:function(){this.fileList.map(function(t){return t.name=t.fsFileBy.bsName+t.fsFileBy.bsFileType,t}),this.getProductData("")},methods:{getSupplierData:function(t){var e=this;this.api.supplierinfo.getlist({bsSuppCode:t}).then(function(t){e.suppliers=t.data.rows.map(function(t){return t.value=t.bsSuppChieseName,t}),e.suppliers.length>0&&e.handleSelectSupplier(e.suppliers[0])})},getProductData:function(t){var e=this;this.api.productinfo.getlist({page:1,rows:100,keyWord:t}).then(function(t){e.products=t.data.rows.map(function(t){return t.value=t.bsPrName+"("+t.bsSuppChieseName+")",t})})},queryProduct:function(t,e){var o=this;this.api.productinfo.getlist({page:1,rows:200,keyWord:t}).then(function(t){o.products=t.data.rows.map(function(t){return t.value=t.bsPrName+"("+t.bsSuppChieseName+")",t}),e(o.products)})},productFileter:function(t){return function(e){return 0===e.bsPrName.toLowerCase().indexOf(t.toLowerCase())}},handleSelectSupplier:function(t){this.form.bsSuppId=t.id,this.form.bsSuppCompanyName=t.bsSuppChieseName,this.form.bsSuppCompanyEmail=t.bsSuppEmail,this.form.bsSuppCompanyMobile=t.bsSuppMobile,this.form.bsSuppCompanyPerson=t.bsSuppContactName,this.form.bsSuppCompanyCode=t.bsSuppCode,console.log(this.form)},handleSelectProduct:function(t){this.form.bsPrId=t.id,this.form.bsPrName=t.bsPrName,this.form.bsPrCode=t.bsPrCode,this.getSupplierData(t.bsSuppCode)},submitFeeback:function(){var t=this;this.fileList.length>0&&(this.form.fileIdStr=this.fileList.map(function(t){return t.id}).toString()),void 0==this.form.id?this.api.feedback.add(this.form).then(function(e){t.form.id=e.data.id,t.$router.push({path:"/qms/feedback/details",query:{feedbackId:e.data.id}}),t.$Message.info("提交成功")}):this.api.feedback.edit(this.form).then(function(e){t.$Message.info("修改成功")})},handleUpload:function(t){var e=this;this.file=t;var o=new FormData;return o.append("file",this.file),this.api.fileQms.upload(o).then(function(t){if(t.result){var o=(0,a.default)(t.data,{name:e.file.name});e.fileList.push(o)}else e.$Message.error(t.msg)}),!0},downloadFile:function(t){var e={fsFileId:t.id};console.log(e),this.api.fileQms.getfile(e).then(function(t){t.click()})},handleRemove:function(t,e){var o=this,s={id:t.id};this.api.approvedItemsRecordFile.delete(s).then(function(t){t.result?(o.fileList.remove(),o.$Message.info("删除成功")):o.$Message.error(t.msg)})}}}},2228:function(t,e,o){var s=o(2229);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);o(21)("919b04d2",s,!1)},2229:function(t,e,o){e=t.exports=o(20)(!1),e.push([t.i,'\n.ApprovedFlowManagement .ivu-table {\n  font-size: 14px;\n}\n.ApprovedTermsManagement .ivu-table-cell {\n  font-size: 14px;\n}\n.SampleManagement .ivu-table {\n  font-size: 14px;\n}\n.SampleRegularManagement .ivu-table {\n  font-size: 14px;\n}\n.feedbackreport #customer-body:after {\n  content: ".";\n  visibility: hidden;\n  display: block;\n  clear: both;\n}\n.feedbackreport .customer-body-div {\n  height: 50px;\n  float: left;\n}\n.feedbackreport .customer-body-text {\n  float: left;\n  margin-top: 10px;\n  width: 130px;\n  font-size: 14px;\n  text-align: right;\n}\n.feedbackreport .customer-body-input {\n  float: left;\n}\n.feedbackreport .customer-body-input .el-input {\n  width: 300px;\n  color: #444;\n}\n.feedbackreport #supplier-body:after {\n  content: ".";\n  visibility: hidden;\n  display: block;\n  clear: both;\n}\n.feedbackreport .supplier-body-div {\n  height: 50px;\n  float: left;\n}\n.feedbackreport .supplier-body-text {\n  float: left;\n  margin-top: 10px;\n  width: 130px;\n  font-size: 14px;\n  text-align: right;\n}\n.feedbackreport .supplier-body-input {\n  float: left;\n}\n.feedbackreport .supplier-body-input .el-input {\n  width: 300px;\n  color: #444;\n}\n.feedbackreport #product-body:after {\n  content: ".";\n  visibility: hidden;\n  display: block;\n  clear: both;\n}\n.feedbackreport .product-body-div {\n  height: 50px;\n  float: left;\n}\n.feedbackreport .product-body-text {\n  float: left;\n  margin-top: 10px;\n  width: 130px;\n  font-size: 14px;\n  text-align: right;\n}\n.feedbackreport .product-body-input {\n  float: left;\n}\n.feedbackreport .product-body-input .el-input {\n  width: 300px;\n  color: #444;\n}\n.feedbackreport #feedback-body {\n  padding-top: 10px;\n  padding-bottom: 50px;\n  padding-left: 3%;\n}\n.feedbackreport #feedback-body-picture {\n  margin-top: 30px;\n}\n.feedbackreport #feedback-body-picture p {\n  font-size: 14px;\n}\n.feedbackreport .el-icon-plus {\n  display: block;\n  font-size: 30px;\n}\n.Upload {\n  margin-top: 15px;\n  width: 45%;\n}\n',""])},2230:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"feedbackreport"},[o("Row",{attrs:{gutter:10}},[o("Col",{style:{marginBottom:"20px"},attrs:{md:24}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"person"}}),t._v("\n                         "+t._s(t.$t("feedback.CustomerInformation"))+"\n                   \t")],1),t._v(" "),o("div",{attrs:{id:"customer-body"}},[o("div",{staticClass:"customer-body-div"},[o("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.CusCompanyName"))+"：")]),t._v(" "),o("div",{staticClass:"customer-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyName,callback:function(e){t.$set(t.form,"bsCusCompanyName",e)},expression:"form.bsCusCompanyName"}})],1)]),t._v(" "),o("div",{staticClass:"customer-body-div"},[o("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.CustomerID"))+"：")]),t._v(" "),o("div",{staticClass:"customer-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyCode,callback:function(e){t.$set(t.form,"bsCusCompanyCode",e)},expression:"form.bsCusCompanyCode"}})],1)]),t._v(" "),o("div",{staticClass:"customer-body-div"},[o("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.ContactName"))+"：")]),t._v(" "),o("div",{staticClass:"customer-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyPerson,callback:function(e){t.$set(t.form,"bsCusCompanyPerson",e)},expression:"form.bsCusCompanyPerson"}})],1)]),t._v(" "),o("div",{staticClass:"customer-body-div"},[o("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.ContactNumber"))+"：")]),t._v(" "),o("div",{staticClass:"customer-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyMobile,callback:function(e){t.$set(t.form,"bsCusCompanyMobile",e)},expression:"form.bsCusCompanyMobile"}})],1)]),t._v(" "),o("div",{staticClass:"customer-body-div"},[o("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.ContactEmail"))+"：")]),t._v(" "),o("div",{staticClass:"customer-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyEmail,callback:function(e){t.$set(t.form,"bsCusCompanyEmail",e)},expression:"form.bsCusCompanyEmail"}})],1)])])])],1),t._v(" "),o("Col",{style:{marginBottom:"20px"},attrs:{md:24}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"cube"}}),t._v("\n                         "+t._s(t.$t("feedback.ProductInformation"))+"\n                    ")],1),t._v(" "),o("div",{attrs:{id:"product-body"}},[o("div",{staticClass:"product-body-div"},[o("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.ProductName"))+"：")]),t._v(" "),o("div",{staticClass:"product-body-input"},[o("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"300px"},attrs:{"fetch-suggestions":t.queryProduct},on:{select:t.handleSelectProduct},model:{value:t.form.bsPrName,callback:function(e){t.$set(t.form,"bsPrName",e)},expression:"form.bsPrName"}})],1)]),t._v(" "),o("div",{staticClass:"product-body-div"},[o("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.ProductNumber"))+"：")]),t._v(" "),o("div",{staticClass:"product-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsPrCode,callback:function(e){t.$set(t.form,"bsPrCode",e)},expression:"form.bsPrCode"}})],1)]),t._v(" "),o("div",{staticClass:"product-body-div"},[o("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.amount"))+"：")]),t._v(" "),o("div",{staticClass:"product-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsPrNum,callback:function(e){t.$set(t.form,"bsPrNum",e)},expression:"form.bsPrNum"}})],1)]),t._v(" "),o("div",{staticClass:"product-body-div"},[o("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.place"))+"：")]),t._v(" "),o("div",{staticClass:"product-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsReportLocation,callback:function(e){t.$set(t.form,"bsReportLocation",e)},expression:"form.bsReportLocation"}})],1)]),t._v(" "),o("div",{staticClass:"product-body-div"},[o("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.origin"))+"：")]),t._v(" "),o("div",{staticClass:"product-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsProductLocation,callback:function(e){t.$set(t.form,"bsProductLocation",e)},expression:"form.bsProductLocation"}})],1)]),t._v(" "),o("div",{staticClass:"product-body-div"},[o("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.TheDateOfProduction"))+"：")]),t._v(" "),o("div",{staticClass:"product-body-input"},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.bsProductDate,callback:function(e){t.$set(t.form,"bsProductDate",e)},expression:"form.bsProductDate"}})],1)])])])],1),t._v(" "),o("Col",{style:{marginBottom:"20px"},attrs:{md:24}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"ios-folder"}}),t._v("\n                         "+t._s(t.$t("feedback.SupplierInformation"))+"\n                   \t")],1),t._v(" "),o("div",{attrs:{id:"supplier-body"}},[o("div",{staticClass:"supplier-body-div"},[o("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.SupplierName"))+"：")]),t._v(" "),o("div",{staticClass:"supplier-body-input"},[o("el-input",{staticClass:"inline-input",staticStyle:{width:"300px"},model:{value:t.form.bsSuppCompanyName,callback:function(e){t.$set(t.form,"bsSuppCompanyName",e)},expression:"form.bsSuppCompanyName"}})],1)]),t._v(" "),o("div",{staticClass:"supplier-body-div"},[o("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.SupplierID"))+"：")]),t._v(" "),o("div",{staticClass:"supplier-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyCode,callback:function(e){t.$set(t.form,"bsSuppCompanyCode",e)},expression:"form.bsSuppCompanyCode"}})],1)]),t._v(" "),o("div",{staticClass:"supplier-body-div"},[o("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.ContactName"))+"：")]),t._v(" "),o("div",{staticClass:"supplier-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyPerson,callback:function(e){t.$set(t.form,"bsSuppCompanyPerson",e)},expression:"form.bsSuppCompanyPerson"}})],1)]),t._v(" "),o("div",{staticClass:"supplier-body-div"},[o("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.ContactNumber"))+"：")]),t._v(" "),o("div",{staticClass:"supplier-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyMobile,callback:function(e){t.$set(t.form,"bsSuppCompanyMobile",e)},expression:"form.bsSuppCompanyMobile"}})],1)]),t._v(" "),o("div",{staticClass:"supplier-body-div"},[o("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.ContactEmail"))+"：")]),t._v(" "),o("div",{staticClass:"supplier-body-input"},[o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyEmail,callback:function(e){t.$set(t.form,"bsSuppCompanyEmail",e)},expression:"form.bsSuppCompanyEmail"}})],1)])])])],1)],1),t._v(" "),o("Row",[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"chatbox-working"}}),t._v("\n                     "+t._s(t.$t("feedback.CustomerComplaintInformation"))+"\n               \t")],1),t._v(" "),o("div",{attrs:{id:"feedback-body"}},[o("div",[o("p",{staticStyle:{"font-size":"14px","margin-top":"30px"}},[t._v(t._s(t.$t("feedback.ProblemDescription")))]),t._v(" "),o("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入内容"},model:{value:t.form.bsProblemDesc,callback:function(e){t.$set(t.form,"bsProblemDesc",e)},expression:"form.bsProblemDesc"}})],1),t._v(" "),o("div",{attrs:{id:"feedback-body-picture"}},[o("p",[t._v(t._s(t.$t("feedback.RelatedImages")))]),t._v(" "),o("div",{staticClass:"Upload"},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"","before-upload":t.handleUpload,"on-preview":t.downloadFile,"on-remove":t.handleRemove,"file-list":t.fileList}},[o("el-button",{attrs:{size:"medium",type:"success",plain:""}},[t._v("\n\t\t\t\t\t\t\t    "+t._s(t.$t("upcoming.UploadAttachment"))+"\n\t\t\t\t\t\t\t  ")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)])])])],1),t._v(" "),o("div",{staticStyle:{"margin-bottom":"100px","margin-top":"50px"}},[o("center",[o("el-button",{staticStyle:{width:"10%",padding:"7px 0"},attrs:{type:"primary"},on:{click:t.submitFeeback}},[t._v(t._s(t.$t("feedback.submit")))])],1)],1)],1)},a=[];s._withStripped=!0;var i={render:s,staticRenderFns:a};e.default=i}});