webpackJsonp([70],{1178:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(1760),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);var s=a(2064),n=a.n(s),l=a(1),m=l(r.a,n.a,!1,null,null,null);m.options.__file="src/view/member/lab/equipment/equipment.vue",t.default=m.exports},1760:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(98),r=function(e){return e&&e.__esModule?e:{default:e}}(o),i=a(97);t.default={created:function(){this.getDate()},computed:(0,r.default)({},(0,i.mapState)({menuData:function(e){return e.menuData}})),data:function(){var e=this;return{start:0,end:15,dialog:{ruleForm:{eqCode:[{required:!0,message:"请填写编码",trigger:"blur"}],eqName:[{required:!0,message:"请填写名称",trigger:"blur"}]},modal_dialog:!1,modal_dialog1:!1},message:"新增",dict:{bsStatus:[{value:0,name:"可用"},{value:1,name:"不可用"}]},formQuery:{eqCode:"",eqName:""},isShow:!1,formItem:{eqNameY:"",id:"",eqName:"",eqCode:"",eqState:0,eqManager:"",eqPosition:""},datagrid:{queryParams:{page:1,rows:15,pkParent:-1},pagination:[15,50,100],data:{rows:[],total:0,rows1:[]},columns:[{title:"设备名称",key:"eqName"},{title:"设备状态",key:"eqState",render:function(t,a){return t("span",e.dict.bsStatus[a.row.eqState].name)}},{title:"创建时间",key:"bsCreatedTime"},{title:"操作",key:"action",render:function(t,a){var o=[];return e.menuData.perms.EDIT&&o.push(t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showEditDialog(a)}}},"编辑")),e.menuData.perms.DELETE&&o.push(t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.delete(a)}}},"删除")),t("div",o)}}]}}},methods:{toggle:function(){this.isShow=!this.isShow,"新增"==this.message?this.message="隐藏":this.message="新增"},getDate:function(){var e=this;this.api.equipment.selectEquipmet().then(function(t){t.result?(e.datagrid.data.rows1=e.datagrid.data.rows,e.datagrid.data.rows=t.data.rows.slice(e.start,e.end),e.datagrid.data.total=t.data.total):e.$Message.error(t.msg)})},t:function(){var e=this;if(""==this.formItem.eqName)return this.$Message.error("填写信息有误");this.formItem.eqName=this.formItem.eqName.trim(),this.api.equipment.saveMachine(this.formItem).then(function(t){t.result?(e.getDate(),e.$Message.success("添加成功")):e.$Message.error("名称已存在，请重新添加")})},showAddDialog:function(){this.dialog.modal_dialog=!0,this.dialog.formItem={}},cancel:function(){},delete:function(e){var t=this;this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",loading:!0,onOk:function(){t.api.equipment.deleteEquipmet(e.row).then(function(e){e.result?(t.getDate(),t.$Message.info("删除成功"),t.$Modal.remove()):t.$Message.error("删除失败")})}})},showEditDialog:function(e){this.dialog.modal_dialog1=!0,this.formItem.eqCode=e.row.eqCode,this.formItem.eqName=e.row.eqName,this.formItem.eqNameY=e.row.eqName,this.formItem.eqPosition=e.row.eqPosition,this.formItem.eqManager=e.row.eqManager,this.formItem.eqState=e.row.eqState,this.formItem.id=e.row.id},update:function(e){var t=this;this.api.equipment.update(e).then(function(e){e.result&&(t.getDate(),t.$Message.success("更新成功")),e.result||t.$Message.error("名称已存在，请重新添加")})},handleSubmit:function(){var e=this;""==this.formQuery.eqName?this.getDate():(this.formQuery.eqName=this.formQuery.eqName.trim(),this.api.equipment.selectEquipmet1(this.formQuery).then(function(t){t.result?e.datagrid.data=t.data:e.$Message.error(t.msg)}))},changePage:function(e){this.start=(e-1)*this.datagrid.queryParams.rows,this.end=e*this.datagrid.queryParams.rows,this.getDate()},chageSize:function(e){this.datagrid.queryParams.rows=e,this.start=0,this.end=e,this.getDate()}}}},2064:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("Row",[a("i-col",[a("Form",{ref:"formQuery",staticClass:"query_area",attrs:{model:e.formQuery,inline:""}},[a("Form-item",[a("Input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.formQuery.eqName,callback:function(t){e.$set(e.formQuery,"eqName",t)},expression:"formQuery.eqName"}})],1),e._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formQuery")}}},[e._v("查 询")])],1),e._v(" "),e.menuData.perms.ADD?a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.showAddDialog()}}},[e._v(e._s(e.message))])],1):e._e()],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:""},on:{"on-ok":e.t,"on-cancel":e.cancel},model:{value:e.dialog.modal_dialog,callback:function(t){e.$set(e.dialog,"modal_dialog",t)},expression:"dialog.modal_dialog"}},[a("p"),a("div",[a("Row",[a("i-col",[a("Form",{ref:e.dialog.ruleForm,staticStyle:{"text-align":"center"},attrs:{model:e.formItem,"label-width":80,rules:e.dialog.ruleForm}},[a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"id"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}})],1)],1)],1),e._v(" "),a("FormItem",{attrs:{label:"设备名称",prop:"eqName"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.formItem.eqName,callback:function(t){e.$set(e.formItem,"eqName",t)},expression:"formItem.eqName"}})],1)],1)],1),e._v(" "),a("FormItem",{attrs:{label:"设备状态"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Select",{model:{value:e.formItem.eqState,callback:function(t){e.$set(e.formItem,"eqState",t)},expression:"formItem.eqState"}},[a("Option",{attrs:{value:"0"}},[e._v("可用")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("不可用")])],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("p")]),e._v(" "),a("Modal",{attrs:{title:""},on:{"on-ok":function(t){e.update(e.formItem)},"on-cancel":e.cancel},model:{value:e.dialog.modal_dialog1,callback:function(t){e.$set(e.dialog,"modal_dialog1",t)},expression:"dialog.modal_dialog1"}},[a("p"),a("div",[a("Row",[a("i-col",[a("Form",{staticStyle:{"text-align":"center"},attrs:{model:e.formItem,"label-width":80}},[a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"id"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}})],1)],1)],1),e._v(" "),a("FormItem",{attrs:{label:"设备名称"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.formItem.eqName,callback:function(t){e.$set(e.formItem,"eqName",t)},expression:"formItem.eqName"}})],1)],1)],1),e._v(" "),a("FormItem",{attrs:{label:"原设备设备名称"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{disabled:"disabled",placeholder:"请输入设备名称"},model:{value:e.formItem.eqNameY,callback:function(t){e.$set(e.formItem,"eqNameY",t)},expression:"formItem.eqNameY"}})],1)],1)],1),e._v(" "),a("FormItem",{attrs:{label:"设备状态"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Select",{model:{value:e.formItem.eqState,callback:function(t){e.$set(e.formItem,"eqState",t)},expression:"formItem.eqState"}},[a("Option",{attrs:{value:"0"}},[e._v("可用")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("不可用")])],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("p")]),e._v(" "),a("Row",[a("i-col",{attrs:{span:"24"}},[a("Table",{staticStyle:{height:"auto"},attrs:{data:e.datagrid.data.rows,columns:e.datagrid.columns,stripe:""}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.datagrid.data.total,current:1,"page-size":e.datagrid.queryParams.rows,"page-size-opts":e.datagrid.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.chageSize}})],1)])],1)],1)],1)},r=[];o._withStripped=!0;var i={render:o,staticRenderFns:r};t.default=i}});