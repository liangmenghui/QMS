webpackJsonp([20],{1181:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(1895),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);var s=a(2064),r=a.n(s),l=a(1),d=l(i.a,r.a,!1,null,null,null);d.options.__file="src/view/member/globalconfig/index.vue",e.default=d.exports},1256:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(17),n=o(i),s=a(1270),r=o(s);e.default={components:{custExtprops:r.default},props:{type:String,size:String,name:String,catelog:String,rid:""},data:function(){return{title:"客制化属性",visible:!1,data:[]}},computed:{},created:function(){},methods:{showDialog:function(t){"Number"==typeof t&&(this.rid=t),this.rid?(this.$refs.custExtprops.show(!0),this.loadData(this.rid)):console.log("rid is required")},loadData:function(t){var e=this,a=this.catelog+":"+t;this.api.admin.customfieldvalue.getlist({catelog:this.catelog,handler:a}).then(function(t){if(console.log(t),t.result){for(var o in t.data.rows)t.data.rows[o].handler=a+","+t.data.rows[o].bsName;e.data=t.data.rows}})},ok:function(t){var e=this;this.api.admin.customfieldvalue.save({catelog:this.catelog,json:(0,n.default)(t)}).then(function(t){t.result?e.$message.info(t.message):e.$message.error(t.message)})},cancel:function(){this.$emit("cancel")}}}},1257:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"cust-extprops",props:{title:String,data:Array},data:function(){return{formItem:{},visible:!1}},created:function(){},methods:{show:function(t){this.visible=!0},ok:function(){this.$emit("ok",this.data)},cancel:function(){this.$emit("cancel")}}}},1267:function(t,e,a){"use strict";function o(t){d||a(1268)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(1256),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);var r=a(1274),l=a.n(r),d=!1,c=a(1),u=o,m=c(n.a,l.a,!1,u,null,null);m.options.__file="src/components/business-component/custDialog.vue",e.default=m.exports},1268:function(t,e,a){var o=a(1269);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(21)("489ad722",o,!1)},1269:function(t,e,a){e=t.exports=a(20)(!1),e.push([t.i,"\n.split-width {\n  padding-left: 3px;\n}\n",""])},1270:function(t,e,a){"use strict";function o(t){d||a(1271)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(1257),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);var r=a(1273),l=a.n(r),d=!1,c=a(1),u=o,m=c(n.a,l.a,!1,u,null,null);m.options.__file="src/components/business-component/custExtprops.vue",e.default=m.exports},1271:function(t,e,a){var o=a(1272);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(21)("38340c12",o,!1)},1272:function(t,e,a){e=t.exports=a(20)(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},1273:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{transfer:"",title:t.title},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{padding:"5px 5px"}},[a("Form",{ref:"ruleForm",attrs:{"label-width":80}},t._l(t.data,function(e){return a("Row",{key:e.bsName},[a("i-col",{attrs:{span:"24"}},[a("span",{staticStyle:{display:"none"}},[a("Input",{model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"item.id"}})],1),t._v(" "),a("Form-item",{attrs:{label:e.bsLabel}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.bsValue,callback:function(a){t.$set(e,"bsValue",a)},expression:"item.bsValue"}})],1)],1)],1)}))],1)])},i=[];o._withStripped=!0;var n={render:o,staticRenderFns:i};e.default=n},1274:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"split-width"},[a("Button",{attrs:{type:t.type,size:t.size},on:{click:t.showDialog}},[t._v(t._s(t.name))]),t._v(" "),a("cust-extprops",{ref:"custExtprops",attrs:{data:t.data,title:"客制化属性"},on:{ok:t.ok}})],1)},i=[];o._withStripped=!0;var n={render:o,staticRenderFns:i};e.default=n},1895:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(22),n=o(i),s=a(11),r=o(s),l=a(72),d=o(l),c=a(98),u=a(1267),m=o(u);e.default={components:{custDialog:m.default},data:function(){var t=this;return{applications:["global","scm","pmp","lmp","qms","srm","wms"],categories:["system_global"],formQuery:{bsCode:"",bsName:""},dialog:{modal_dialog:!1,formItem:{},ruleForm:{bsApplicationName:[{required:!0,message:"请填写应用名",trigger:"blur"}],bsEnv:[{required:!0,message:"请选择应用环境",trigger:"blur"}],bsCode:[{required:!0,message:"请填写编码",trigger:"blur"}],bsName:[{required:!0,message:"请填写备注",trigger:"blur"}]}},datagrid:{queryParams:{page:1,rows:25,pkParent:-1},pagination:[25,50,100],data:{rows:[],total:0},columns:[{title:"应用名",key:"bsApplicationName",align:"center"},{title:"分类",key:"bsCategory",align:"center"},{title:"编码",key:"bsCode",align:"center"},{title:"名称",key:"bsName",align:"center"},{title:"参数值",key:"bsValue",align:"center"},{title:"状态",key:"bsEnableState",align:"center"},{title:"应用环境",key:"bsEnv",align:"center"},{title:"描述",key:"bsComment"},{title:"操作",key:"action",render:function(e,a){var o=[];return t.menuData.perms.EDIT&&o.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showEditDialog(a)}}},"编辑")),t.menuData.perms.DELETE&&o.push(e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.delete(a)}}},"删除")),t.menuData.perms.CUSTOMFIELD&&o.push(e(m.default,{props:{type:"primary",size:"small",name:"客制化",ref:"custDialog",catelog:"SysGlobalConfigBo",rid:a.row.id},on:{click:function(){t.$refs.custDialog.showDialog()}}})),e("div",o)}}]}}},created:function(){},computed:(0,d.default)({},(0,c.mapState)({menuData:function(t){return t.menuData}})),methods:{handleSubmit:function(t){this.getData()},getData:function(){var t=this;(0,r.default)(this.formQuery,this.datagrid.queryParams),this.api.admin.globalconfig.getlist(this.formQuery).then(function(e){e.result?t.datagrid.data=e.data:t.$Message.error(e.msg)})},reloadData:function(){this.datagrid.data=this.getData()},changePage:function(t){this.datagrid.queryParams.page=t,this.datagrid.data=this.getData()},edit:function(t){var e=this;this.api.admin.globalconfig.edit(t.row).then(function(t){t.result?e.reloadData():e.$Message.error(t.msg)})},delete:function(t){var e=this;this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",loading:!0,onOk:function(){e.api.admin.globalconfig.delete({id:t.row.id}).then(function(t){t.result?(e.reloadData(),e.$Message.info("删除成功"),e.$Modal.remove()):e.$Message.error(t.msg)})}})},showAddDialog:function(){this.dialog.modal_dialog=!0,this.dialog.formItem={bsEnableState:0,bsEnv:"dev"}},showEditDialog:function(t){this.dialog.modal_dialog=!0;var e=t.row;this.dialog.formItem={id:e.id,bsApplicationName:e.bsApplicationName,bsCategory:e.bsCategory,bsCode:e.bsCode,bsName:e.bsName,bsValue:e.bsValue,bsEnableState:e.bsEnableState,bsEnv:e.bsEnv,bsComment:e.bsComment}},ok:function(){var t=this;void 0!=(0,n.default)(this.dialog.formItem.id)&&"number"==typeof this.dialog.formItem.id?this.api.admin.globalconfig.edit(this.dialog.formItem).then(function(e){e.result?t.reloadData():t.$Message.error(e.msg)}):this.api.admin.globalconfig.add(this.dialog.formItem).then(function(e){e.result?t.reloadData():t.$Message.error(e.msg)})},cancel:function(){}}}},2064:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("i-col",[a("Form",{ref:"formQuery",staticClass:"query_area",attrs:{model:t.formQuery,inline:""}},[a("Row",[a("i-col",{attrs:{span:"4"}},[a("Form-item",{attrs:{label:"",prop:"bsApplicationName"}},[a("AutoComplete",{attrs:{data:t.applications,placeholder:"应用名"},model:{value:t.formQuery.bsApplicationName,callback:function(e){t.$set(t.formQuery,"bsApplicationName",e)},expression:"formQuery.bsApplicationName"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"4"}},[a("Form-item",{attrs:{label:"",prop:"bsCategory"}},[a("AutoComplete",{attrs:{data:t.categories,placeholder:"分类"},model:{value:t.formQuery.bsCategory,callback:function(e){t.$set(t.formQuery,"bsCategory",e)},expression:"formQuery.bsCategory"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"4"}},[a("Form-item",{attrs:{label:"",prop:"bsCode"}},[a("Input",{attrs:{placeholder:"编码"},model:{value:t.formQuery.bsCode,callback:function(e){t.$set(t.formQuery,"bsCode",e)},expression:"formQuery.bsCode"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"4"}},[a("Form-item",{attrs:{label:"",prop:"bsEnv"}},[a("Input",{attrs:{placeholder:"应用环境"},model:{value:t.formQuery.bsEnv,callback:function(e){t.$set(t.formQuery,"bsEnv",e)},expression:"formQuery.bsEnv"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"8"}},[a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formQuery")}}},[t._v("查 询")])],1),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showAddDialog()}}},[t._v("新 增")])],1)],1)],1)],1)],1)],1),t._v(" "),a("Row",[a("i-col",{attrs:{span:"24"}},[a("Table",{attrs:{data:t.datagrid.data.rows,columns:t.datagrid.columns,stripe:"",height:"370"}}),t._v(" "),a("div",{staticStyle:{margin:"10px"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.datagrid.data.total,current:1,"page-size":t.datagrid.queryParams.rows,"page-size-opts":t.datagrid.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage}})],1)])],1)],1),t._v(" "),a("Modal",{attrs:{title:"",width:"800"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.dialog.modal_dialog,callback:function(e){t.$set(t.dialog,"modal_dialog",e)},expression:"dialog.modal_dialog"}},[a("p",[a("Form",{ref:t.dialog.ruleForm,attrs:{model:t.dialog.formItem,rules:t.dialog.ruleForm,"label-width":80}},[a("span",{staticStyle:{display:"none"}},[a("Input",{model:{value:t.dialog.formItem.id,callback:function(e){t.$set(t.dialog.formItem,"id",e)},expression:"dialog.formItem.id"}})],1),t._v(" "),a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"应用名",prop:"bsApplicationName"}},[a("AutoComplete",{attrs:{data:t.applications,placeholder:"请输入"},model:{value:t.dialog.formItem.bsApplicationName,callback:function(e){t.$set(t.dialog.formItem,"bsApplicationName",e)},expression:"dialog.formItem.bsApplicationName"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"分类",prop:"bsCategory"}},[a("AutoComplete",{attrs:{data:t.categories,placeholder:"请输入"},model:{value:t.dialog.formItem.bsCategory,callback:function(e){t.$set(t.dialog.formItem,"bsCategory",e)},expression:"dialog.formItem.bsCategory"}})],1)],1)],1),t._v(" "),a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"编码",prop:"bsCode"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsCode,callback:function(e){t.$set(t.dialog.formItem,"bsCode",e)},expression:"dialog.formItem.bsCode"}})],1)],1),t._v(" "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"名称",prop:"bsName"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsName,callback:function(e){t.$set(t.dialog.formItem,"bsName",e)},expression:"dialog.formItem.bsName"}})],1)],1)],1),t._v(" "),a("Row",[a("i-col",{attrs:{span:"24"}},[a("Form-item",{attrs:{label:"参数值",prop:"bsValue"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsValue,callback:function(e){t.$set(t.dialog.formItem,"bsValue",e)},expression:"dialog.formItem.bsValue"}})],1)],1)],1),t._v(" "),a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"启用状态",prop:"bsEnableState"}},[a("RadioGroup",{model:{value:t.dialog.formItem.bsEnableState,callback:function(e){t.$set(t.dialog.formItem,"bsEnableState",e)},expression:"dialog.formItem.bsEnableState"}},[a("Radio",{attrs:{label:1}},[a("span",[t._v("启 用")])]),t._v(" "),a("Radio",{attrs:{label:0}},[a("span",[t._v("停 用")])])],1)],1)],1),t._v(" "),a("i-col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"环境",prop:"bsEnv"}},[a("RadioGroup",{model:{value:t.dialog.formItem.bsEnv,callback:function(e){t.$set(t.dialog.formItem,"bsEnv",e)},expression:"dialog.formItem.bsEnv"}},[a("Radio",{attrs:{label:"dev"}},[a("span",[t._v("开发环境")])]),t._v(" "),a("Radio",{attrs:{label:"test"}},[a("span",[t._v("测试环境")])]),t._v(" "),a("Radio",{attrs:{label:"prod"}},[a("span",[t._v("生产环境")])])],1)],1)],1)],1),t._v(" "),a("Row",[a("i-col",{attrs:{span:"24"}},[a("Form-item",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入..."},model:{value:t.dialog.formItem.bsComment,callback:function(e){t.$set(t.dialog.formItem,"bsComment",e)},expression:"dialog.formItem.bsComment"}})],1)],1)],1)],1)],1)])],1)},i=[];o._withStripped=!0;var n={render:o,staticRenderFns:i};e.default=n}});