webpackJsonp([0],{1308:function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(11),r=s(a),i=o(17),l=s(i);t.default={props:["approvedItemRecord","type","data","sampleRegularRecords"],data:function(){return{showFailedModel:!1,showSuccessModel:!1,showRejectModel:!1,isCoach:1,resultDesc:"",flowDesc:""}},created:function(){},mounted:function(){},methods:{showModel:function(e){3==e?this.showFailedModel=!0:2==e?this.showRejectModel=!0:this.showSuccessModel=!0},approved:function(e){var t=this;if(0!=e){var o={bsItemsId:this.approvedItemRecord.itemsBy.id,bsItemsRecordId:this.approvedItemRecord.id,bsResult:e,itemsDesc:this.flowDesc,resultDesc:this.resultDesc};this.api.Audit.approved(o).then(function(o){t.$Message.info("提交审核结果完成"),t.bsStatus=e;var s=t.$route.matched[t.$route.matched.length-2].path,a={path:s,query:{bsFlowRecordId:t.$route.query.bsFlowRecordId,refresh:!0}};t.$router.replace(a)})}},saveRecord:function(e){var t=this;if("audits"==this.type){for(var o=new Array,s=this.data,a=0;a<s.length;a++){var i={};i.bsItemsRecoreId=this.approvedItemRecord.id,i.bsTermsId=s[a].ID,i.bsScore=s[a].BS_SCORE,i.bsDesc=s[a].BS_DESC,void 0!=s[a].SCORE_ID&&(i.id=s[a].SCORE_ID),o.push(i)}(0,l.default)(o);this.api.Audit.records({approvedTermsScoreStr:(0,l.default)(o)}).then(function(o){t.$emit("updateTermsRecord"),t.$Message.info("保存成功"),t.approved(e)})}else if("inspect"==this.type){var n=(0,r.default)({},this.data);if(n=this.$Util.formattedParams(n),this.api.shipmentInspect.edit(n).then(function(o){t.$Message.info("保存成功"),t.approved(e)}),void 0!=this.sampleRegularRecords){for(var n={bsShipmentInspectId:n.id},d=[],a=0;a<this.sampleRegularRecords.length;a++)for(var c=this.sampleRegularRecords[a],p=0;p<c.records.length;p++){var u=c.records[p];d.push(this.$Util.formattedParams(u))}n.sampleRegularRecordStr=(0,l.default)(d),this.api.sampleRegularRecord.add(n).then(function(e){t.$emit("saved")})}}else if("quality"==this.type){var n=(0,r.default)({},this.data);n=this.$Util.formattedParams(n),this.api.qualityInspect.edit(n).then(function(o){t.$Message.info("保存成功"),t.approved(e)})}else this.approved(e)}}}},1309:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["approvedData","isCoach"],data:function(){return{}}}},1333:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(1308),a=o.n(s);for(var r in s)"default"!==r&&function(e){o.d(t,e,function(){return s[e]})}(r);var i=o(1334),l=o.n(i),n=o(1),d=n(a.a,l.a,!1,null,null,null);d.options.__file="src/views/qms/components/approvedAction.vue",t.default=d.exports},1334:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"component"},[o("center",[o("el-button",{staticStyle:{padding:"7px 20px"},attrs:{type:"primary"},on:{click:function(t){e.saveRecord(0)}}},[o("i",{staticClass:"el-icon-news"}),e._v("  "+e._s(e.$t("Button.SaveChanges"))+"\n        ")]),e._v(" "),e.approvedItemRecord.bsStatus>0&&e.approvedItemRecord.bsStep>1?o("el-button",{staticStyle:{padding:"7px 20px","margin-left":"3%"},attrs:{type:"warning"},on:{click:function(t){e.showModel(2)}}},[o("i",{staticClass:"el-icon-warning"}),e._v("  "+e._s(e.$t("Button.DismissReview"))+"\n        ")]):e._e(),e._v(" "),e.approvedItemRecord.bsStatus>0?o("el-button",{staticStyle:{padding:"7px 20px","margin-left":"3%"},attrs:{type:"danger"},on:{click:function(t){e.showModel(3)}}},[o("i",{staticClass:"el-icon-close"}),e._v("  "+e._s(e.$t("Button.AuditFailed"))+"\n        ")]):e._e(),e._v(" "),e.approvedItemRecord.bsStatus>0?o("el-button",{staticStyle:{padding:"7px 20px","margin-left":"3%"},attrs:{type:"success"},on:{click:function(t){e.showModel(1)}}},[o("i",{staticClass:"el-icon-check"}),e._v("  "+e._s(e.$t("Button.Approved"))+"\n        ")]):e._e(),e._v(" "),o("Modal",{on:{"on-ok":function(t){e.saveRecord(3)}},model:{value:e.showFailedModel,callback:function(t){e.showFailedModel=t},expression:"showFailedModel"}},[o("el-form",{attrs:{"label-width":"80"}},[o("p",{staticStyle:{"font-size":"16px",color:"#F56C6C"}},[e._v(e._s(e.$t("approved.failed_approved")))]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("approved.result_comment")}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.flowDesc,callback:function(t){e.flowDesc=t},expression:"flowDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("approved.item_comment")}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.resultDesc,callback:function(t){e.resultDesc=t},expression:"resultDesc"}})],1)],1)],1),e._v(" "),o("Modal",{on:{"on-ok":function(t){e.saveRecord(1)}},model:{value:e.showSuccessModel,callback:function(t){e.showSuccessModel=t},expression:"showSuccessModel"}},[o("el-form",{attrs:{"label-width":"80"}},[o("p",{staticStyle:{"font-size":"16px",color:"#67C23A"}},[e._v(e._s(e.$t("approved.comfirm_approved")))]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("approved.result_comment")}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.flowDesc,callback:function(t){e.flowDesc=t},expression:"flowDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("approved.item_comment")}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.resultDesc,callback:function(t){e.resultDesc=t},expression:"resultDesc"}})],1)],1)],1),e._v(" "),o("Modal",{on:{"on-ok":function(t){e.saveRecord(2)}},model:{value:e.showRejectModel,callback:function(t){e.showRejectModel=t},expression:"showRejectModel"}},[o("el-form",{attrs:{"label-width":"80"}},[o("p",{staticStyle:{"font-size":"16px",color:"#F56C6C"}},[e._v(e._s(e.$t("approved.reject_approved")))]),e._v(" "),o("el-form-item",{attrs:{label:e.$t("approved.result_comment")}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.flowDesc,callback:function(t){e.flowDesc=t},expression:"flowDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("approved.item_comment")}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.resultDesc,callback:function(t){e.resultDesc=t},expression:"resultDesc"}})],1)],1)],1)],1)],1)},a=[];s._withStripped=!0;var r={render:s,staticRenderFns:a};t.default=r},1335:function(e,t,o){"use strict";function s(e){d||o(1336)}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1309),r=o.n(a);for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);var l=o(1338),n=o.n(l),d=!1,c=o(1),p=s,u=c(r.a,n.a,!1,p,null,null);u.options.__file="src/views/qms/components/approvedResultRecord.vue",t.default=u.exports},1336:function(e,t,o){var s=o(1337);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o(21)("510cd950",s,!1)},1337:function(e,t,o){t=e.exports=o(20)(!1),t.push([e.i,"\n.component{margin-top: 30px;\n}\n",""])},1338:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"component"},[o("Card",[o("p",{staticStyle:{display:"inline"},attrs:{slot:"title"},slot:"title"},[e._v("审核状态: "+e._s(e.$t("approved.status["+e.approvedData.bsStatus+"]")))]),e._v(" "),o("p",{staticStyle:{display:"inline","margin-left":"30px"},attrs:{slot:"title"},slot:"title"},[e._v("结果说明: "+e._s(e.approvedData.bsDesc))]),e._v(" "),e.approvedData.resultSet.length>0?o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.approvedData.resultSet}},[o("el-table-column",{attrs:{label:"审核结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0==e.isCoach?o("span",[e._v(e._s(e.$t("approved.itemResultDesc["+t.row.bsResult+"]")))]):e._e(),e._v(" "),void 0!=e.isCoach?o("span",[e._v(e._s(e.$t("approved.coachResultDesc["+t.row.bsResult+"]")))]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"resultBy.bsName",label:"负责人"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bsDesc",label:"审核意见"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bsCreatedTime",label:"时间"}})],1)],1):e._e()])],1)},a=[];s._withStripped=!0;var r={render:s,staticRenderFns:a};t.default=r},1411:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(11),a=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={props:["fileList","canUpload"],data:function(){return{dialogImageUrl:"",dialogVisible:!1,file:[]}},created:function(){this.fileList.map(function(e){return e.name=e.fsFileBy.bsName+e.fsFileBy.bsFileType,e})},methods:{handleRemove:function(e,t){var o=this;if(e.id&&canUpload){var s={id:e.id};this.api.approvedItemsRecordFile.delete(s).then(function(e){e.result?(o.fileList.remove(),o.$Message.info("删除成功")):o.$Message.error(e.msg)})}},handleUpload:function(e){return this.file=e,this.getData(),!0},getData:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("bsItemsRecordId",this.$route.query.itemsRecordId),this.api.approvedItemsRecordFile.add(t).then(function(t){if(t.result){var o=(0,a.default)(t.data,{name:e.file.name});e.fileList.push(o)}else e.$Message.error(t.msg)})},downloadFile:function(e){var t={fsFileId:e.fsFileId};this.api.fileQms.getfile(t).then(function(e){e.click()})}}}},164:function(e,t,o){"use strict";function s(e){d||o(2160)}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1814),r=o.n(a);for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);var l=o(2164),n=o.n(l),d=!1,c=o(1),p=s,u=c(r.a,n.a,!1,p,null,null);u.options.__file="src/views/qms/view/approved/ApprovedReport.vue",t.default=u.exports},1704:function(e,t,o){"use strict";function s(e){d||o(1705)}Object.defineProperty(t,"__esModule",{value:!0});var a=o(1411),r=o.n(a);for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);var l=o(1707),n=o.n(l),d=!1,c=o(1),p=s,u=c(r.a,n.a,!1,p,null,null);u.options.__file="src/views/qms/components/upload.vue",t.default=u.exports},1705:function(e,t,o){var s=o(1706);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o(21)("3905d981",s,!1)},1706:function(e,t,o){t=e.exports=o(20)(!1),t.push([e.i,"\n.Uploadbox{margin-top:15px;\n}\n.el-upload--text {\n    background-color: #fff;\n    border: none;\n    border-radius: 6px;\n    box-sizing: border-box;\n  \n    text-align: center;\n    cursor: pointer;\n    position: relative;\n}\n.el-upload-list__item{width: 60%;\n}\n",""])},1707:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-upload",{staticClass:"upload-demo",attrs:{action:"","before-upload":e.handleUpload,"on-preview":e.downloadFile,"on-remove":e.handleRemove,"file-list":e.fileList}},[e.canUpload?o("el-button",{attrs:{size:"small",type:"primary",plain:"",icon:"el-icon-plus"}},[e._v("\n    "+e._s(e.$t("upcoming.UploadAttachment"))+"\n  ")]):e._e(),e._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)},a=[];s._withStripped=!0;var r={render:s,staticRenderFns:a};t.default=r},1814:function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(11),r=s(a),i=o(31),l=s(i),n=o(1704),d=s(n),c=o(1333),p=s(c),u=o(2162),f=s(u),m=o(1335),v=s(m);t.default={components:{ApprovedAction:p.default,Upload:d.default,ApprovedCoachAction:f.default,ApprovedResultRecord:v.default},data:function(){return{dialogImageUrl:"",dialogVisible:!1,file:{},perms:{},approvedItemRecord:{},flowData:{},supplierInfo:{},productInfo:{},records:[],percentage:0,grade:0,isPreApproved:!1,isLastStep:!1,editFormVisible:!1,promoteModel:{modal_dialog:!1},addForm:{},editForm:{},promoteData:[],addFormRules:{bsContent:[{required:!0,message:"请输入内容描述",trigger:"blur"}]},editFormRules:{bsContent:[{required:!0,message:"请输入内容描述",trigger:"blur"}]}}},created:function(){this.approvedItemRecord=this.$store.getters.getItemRecordData,this.records=(0,r.default)([],this.$store.getters.getFlowRecordData);var e=this.records.pop();this.flowData=e.itemsBy,this.getpromoteData(),this.flowData.bsType>20?this.supplierInfo=this.$store.getters.getSupplierData:this.flowData.bsType>10&&(this.productInfo=this.$store.getters.getProductData);for(var t=0,o=0,s=0;s<this.records.length;s++){var a=this.records[s];if(a.percent=0,void 0!=a.bsScoreNum){var i=a.bsScoreNum.split("/");if(2==i.length){var n=parseFloat(i[0]),d=parseFloat(i[1]);a.percent=n/d*100,a.percent>50?a.color="green":a.percent>30?a.color="orange":a.color="red",o+=n,t+=d}}}t>0&&(this.percentage=o/t*100),this.percentage>50?this.supplierInfo.bsGrade=3:this.percentage>=30?this.supplierInfo.bsGrade=2:this.percentage>0&&(this.supplierInfo.bsGrade=5),this.isPreApproved=22==this.flowData.bsType,this.isLastStep=this.approvedItemRecord.bsStep==this.approvedItemRecord.users.length,void 0==this.approvedItemRecord.fileSet&&(this.approvedItemRecord.fileSet=[]),this.perms.edit=(this.approvedItemRecord.users[this.approvedItemRecord.bsStep-1]==l.default.get("user")||this.$Util.hasPerm("EDIT"))&&1==this.approvedItemRecord.bsStatus},methods:{formatPercent:function(e){return void 0!=e.percent?e.percent.toFixed(2)+"%":""},getpromoteData:function(){var e=this;this.$store.getters.getItemRecordData.id;this.api.promote.getlist().then(function(t){e.promoteData=t.data.rows})},handleAdd:function(){this.promoteModel.modal_dialog=!0,this.addForm={bsItemsRecordId:this.$store.getters.getItemRecordData.id,bsContent:this.addForm.bsContent,bsAction:this.addForm.bsAction}},addSubmit:function(){var e=this;this.api.promote.add(this.addForm).then(function(t){e.promoteData=t.data.rows,e.getpromoteData()})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=(0,r.default)({},t)},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){e.api.promote.edit(e.editForm).then(function(t){e.getpromoteData()})})},delpromote:function(e){var t=this;this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",onOk:function(){t.api.promote.delete({id:e.row.id}).then(function(e){e.result?(t.getpromoteData(),t.$Modal.remove(),t.$Message.info("删除成功")):t.$Message.error(e.msg)})}})},cancel:function(){}}}},1815:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["approvedItemRecord","needCoach"],data:function(){return{showFailedModel:!1,showSuccessModel:!1,showRejectModel:!1,resultDesc:"",flowDesc:""}},created:function(){void 0!=this.supplierInfo.id&&22==this.flowData.bsType&&(this.canRestart=2==this.supplierInfo.bsGrade,this.canRestart=2==this.supplierInfo.bsGrade||5==this.supplierInfo.bsGrade,this.canPass=3==this.supplierInfo.bsGrade,this.canReject=!1),void 0!=this.productInfo.id&&12==this.flowData.bsType&&(this.canReject=!1,this.canRestart=!0)},methods:{showModal:function(e){3==e?this.showFailedModel=!0:2==e?this.showRejectModel=!0:this.showSuccessModel=!0},approved:function(e){var t=this;if(0!=e){var o={bsItemsId:this.approvedItemRecord.itemsBy.id,bsItemsRecordId:this.approvedItemRecord.id,bsResult:e,itemsDesc:this.flowDesc,resultDesc:this.resultDesc};2==e&&(o.isCoach=1),this.api.Audit.approved(o).then(function(o){t.$Message.info("提交审核结果完成"),t.bsStatus=e;var s=t.$route.matched[t.$route.matched.length-2].path,a={path:s,query:{bsFlowRecordId:t.$route.query.bsFlowRecordId}};t.$router.replace(a)})}},saveRecord:function(e){this.approved(e)}}}},2160:function(e,t,o){var s=o(2161);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o(21)("1c1b376e",s,!1)},2161:function(e,t,o){t=e.exports=o(20)(!1),t.push([e.i,'\n.promotModel .ivu-modal-body{width: 90%;font-family: "Microsoft YaHei"\n}\n.approvedextrareports{padding:0 15px;\n}\n.approvedextrareports #other-body{\n        margin-top: 1px;background-color: white; padding:0 20px;margin-bottom: 10px;\n}\n.approvedextrareports #other-body-div1{\n        font-size: 14px;\n        padding-top: 20px;padding-left: 1%;padding-right: 1%;\n}\n.approvedextrareports .td1{\n        width: 25%;\n        height: 50px;\n        text-align: center;\n}\n.approvedextrareports #bottom{\n        background-color: white;padding-top: 20px;padding-bottom:50px;padding-left: 5%;\n}\n.td{padding: 10px; text-align:center;\n}\n.td .el-upload--text{\n        border: none;\n        display: inline-block;\n        width: 90px;\n        height: 50px;\n        float: left;\n        margin-left: 10px;\n}\n.upload  .el-upload--text{\n        border: none;\n        display: inline-block;\n        height:50px;\n        width: 20%;\n        background: none;   \n        position: absolute;\n        right:8%;\n        top:10px;\n        margin-left: 10px;\n}\n.fileList2 {\n        margin-top:20px;\n        padding-top:20px;   \n        border-top:1px solid #f0f0f0;\n        width: 100%;\n}\n.fltxt{display: inline-block; width:100%;\n}\n.fltxt .grade{line-height: 35px;font-family: "Microsoft YaHei";font-size:16px;\n}\n.fileList2 .el-upload-list{border:1px dashed  #f0f0f0;margin-top:20px;\n}\n.fileList2 .upload-demo{width:80%\n}\n.supplevel{color:#fd5822;margin-left: 15px;\n}\n.cards{margin-top:20px;\n}\n.title3{position: relative;\n}\n.title3 .el-button{position: absolute; right: 120px;top:-9px;\n}\n.cards .ivu-card-head{padding:17px 16px;\n}\n.InitialReview .el-table:before{height: 0\n}\n.InitialReview .ivu-card-body{padding-bottom: 35px;\n}\n\n',""])},2162:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(1815),a=o.n(s);for(var r in s)"default"!==r&&function(e){o.d(t,e,function(){return s[e]})}(r);var i=o(2163),l=o.n(i),n=o(1),d=n(a.a,l.a,!1,null,null,null);d.options.__file="src/views/qms/components/approvedCoachAction.vue",t.default=d.exports},2163:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"component"},[o("center",[o("el-button",{staticStyle:{padding:"7px 20px"},attrs:{type:"primary"},on:{click:function(t){e.saveRecord(0)}}},[o("i",{staticClass:"el-icon-news"}),e._v("  "+e._s(e.$t("Button.SaveChanges"))+"\n        ")]),e._v(" "),o("el-button",{staticStyle:{padding:"7px 20px","margin-left":"3%"},attrs:{type:"warning"},on:{click:function(t){e.showModal(2)}}},[o("i",{staticClass:"el-icon-warning"}),e._v("  "+e._s(e.$t("Button.Coach"))+"\n        ")]),e._v(" "),o("el-button",{staticStyle:{padding:"7px 20px","margin-left":"3%"},attrs:{type:"danger"},on:{click:function(t){e.showModal(3)}}},[o("i",{staticClass:"el-icon-close"}),e._v("  "+e._s(e.$t("Button.AuditFailed"))+"\n        ")]),e._v(" "),o("el-button",{staticStyle:{padding:"7px 20px","margin-left":"3%"},attrs:{type:"success"},on:{click:function(t){e.showModal(1)}}},[o("i",{staticClass:"el-icon-check"}),e._v("  "+e._s(e.$t("Button.Approved"))+"\n        ")]),e._v(" "),o("Modal",{on:{"on-ok":function(t){e.saveRecord(1)}},model:{value:e.showSuccessModel,callback:function(t){e.showSuccessModel=t},expression:"showSuccessModel"}},[o("el-form",{attrs:{"label-width":"80"}},[o("p",{staticStyle:{"font-size":"16px",color:"#67C23A"}},[e._v("确认审核通过？")]),e._v(" "),o("el-form-item",{attrs:{label:"结果说明",prop:""}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.flowDesc,callback:function(t){e.flowDesc=t},expression:"flowDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"审核意见",prop:""}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.resultDesc,callback:function(t){e.resultDesc=t},expression:"resultDesc"}})],1)],1)],1),e._v(" "),o("Modal",{on:{"on-ok":function(t){e.saveRecord(2)}},model:{value:e.showRejectModel,callback:function(t){e.showRejectModel=t},expression:"showRejectModel"}},[o("el-form",{attrs:{"label-width":"80"}},[o("p",{staticStyle:{"font-size":"16px",color:"#F56C6C"}},[e._v("确认进行辅导？")]),e._v(" "),void 0!=e.flowDesc&&e.flowDesc.length>0?o("el-form-item",{attrs:{label:"结果说明"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.flowDesc,callback:function(t){e.flowDesc=t},expression:"flowDesc"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"审核意见",prop:""}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.resultDesc,callback:function(t){e.resultDesc=t},expression:"resultDesc"}})],1)],1)],1),e._v(" "),o("Modal",{on:{"on-ok":function(t){e.saveRecord(3)}},model:{value:e.showFailedModel,callback:function(t){e.showFailedModel=t},expression:"showFailedModel"}},[o("el-form",{attrs:{"label-width":"80"}},[o("p",{staticStyle:{"font-size":"16px",color:"#67C23A"}},[e._v("确认审核不通过？")]),e._v(" "),o("el-form-item",{attrs:{label:"结果说明",prop:""}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.flowDesc,callback:function(t){e.flowDesc=t},expression:"flowDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"审核意见",prop:""}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.resultDesc,callback:function(t){e.resultDesc=t},expression:"resultDesc"}})],1)],1)],1)],1)],1)},a=[];s._withStripped=!0;var r={render:s,staticRenderFns:a};t.default=r},2164:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"approvedextrareports"},[o("Card",{staticClass:"InitialReview"},[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"pricetag"}}),e._v("\n           "+e._s(e.approvedItemRecord.itemsBy.bsName)+"\n      ")],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.records}},[o("el-table-column",{attrs:{prop:"itemsBy.bsName",label:e.$t("approved.AuditingItem")}}),e._v(" "),o("el-table-column",{attrs:{prop:"",label:e.$t("New-audit.score_percent"),width:"250"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("el-progress",{attrs:{percentage:e.row.percent,"show-text":!1,"stroke-width":14,color:e.row.color}})]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"percent",label:e.$t("New-audit.score_percent"),width:"150",formatter:e.formatPercent}})],1)],1),e._v(" "),o("Row",{staticStyle:{margin:"15px 0"}},[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"pricetag"}}),e._v("\n                   "+e._s(e.$t("supplier.InitialReview"))+"\n              ")],1),e._v(" "),o("div",{attrs:{id:"other-body"}},[e.approvedItemRecord.bsSuppId&&22==e.flowData.bsType?o("div",{staticClass:"fltxt"},[o("Col",{attrs:{md:8}},[o("p",{staticClass:"grade"},[e._v(e._s(e.$t("supplier.SuppLevel"))+": "),o("span",{staticClass:"supplevel"},[e._v(e._s(e.$t("supplier.LevelDesc["+e.supplierInfo.bsGrade+"]")))])])]),e._v(" "),o("Col",{attrs:{md:8}},[o("p",{staticClass:"grade"},[e._v(e._s(e.$t("New-audit.score_percent"))+": "),o("span",{staticClass:"supplevel"},[e._v(e._s(e.percentage.toFixed(2)+"%"))])])])],1):e._e(),e._v(" "),o("div",{staticClass:"fileList2"},[o("upload",{attrs:{fileList:e.approvedItemRecord.fileSet,canUpload:e.perms.edit}})],1)])]),e._v(" "),o("Card",{staticClass:"cards"},[o("div",{staticClass:"title3",attrs:{slot:"title"},slot:"title"},[o("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"pricetag"}}),e._v("\n                   "+e._s(e.$t("supplier.ImprovementItems"))+"\n                   "),o("el-button",{attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.handleAdd()}}},[e._v("新增不符合改进项")])],1),e._v(" "),o("div",{attrs:{id:"other-body"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.promoteData}},[o("el-table-column",{attrs:{prop:"bsContent",label:e.$t("supplier.Non_conformance")}}),e._v(" "),o("el-table-column",{attrs:{prop:"bsAction",label:e.$t("supplier.ImprovementMeasures")}}),e._v(" "),o("el-table-column",{attrs:{prop:"bsDeadline",label:e.$t("supplier.CompleteTime")}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("Button.operating")},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(o){e.delpromote(t)}}},[e._v(e._s(e.$t("Button.Delete")))])]}}])})],1)],1)]),e._v(" "),o("Modal",{staticClass:"promotModel",attrs:{title:e.$t("supplier.addImprovementItems"),okText:"新增",cancelText:"取消"},on:{"on-ok":e.addSubmit,"on-cancel":e.cancel},model:{value:e.promoteModel.modal_dialog,callback:function(t){e.$set(e.promoteModel,"modal_dialog",t)},expression:"promoteModel.modal_dialog"}},[o("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"不符合项描述"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.bsContent,callback:function(t){e.$set(e.addForm,"bsContent",t)},expression:"addForm.bsContent"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"改进措施"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.bsAction,callback:function(t){e.$set(e.addForm,"bsAction",t)},expression:"addForm.bsAction"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"完成时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.addForm.bsDeadline,callback:function(t){e.$set(e.addForm,"bsDeadline",t)},expression:"addForm.bsDeadline"}})],1)],1)],1),e._v(" "),o("Modal",{staticClass:"promotModel",attrs:{title:e.$t("supplier.addImprovementItems"),okText:"提交",cancelText:"取消"},on:{"on-ok":e.editSubmit,"on-cancel":e.cancel},model:{value:e.editFormVisible,callback:function(t){e.editFormVisible=t},expression:"editFormVisible"}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"不符合项描述"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.bsContent,callback:function(t){e.$set(e.editForm,"bsContent",t)},expression:"editForm.bsContent"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"改进措施"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.bsAction,callback:function(t){e.$set(e.editForm,"bsAction",t)},expression:"editForm.bsAction"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"完成时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.editForm.bsDeadline,callback:function(t){e.$set(e.editForm,"bsDeadline",t)},expression:"editForm.bsDeadline"}})],1)],1)],1),e._v(" "),o("ApprovedResultRecord",{attrs:{approvedData:e.approvedItemRecord,isCoach:"1"}}),e._v(" "),e.perms.edit?o("div",{attrs:{id:"bottom"}},[e.isLastStep?o("ApprovedCoachAction",{attrs:{approvedItemRecord:e.approvedItemRecord,supplierInfo:e.supplierInfo,productInfo:e.productInfo,flowData:e.flowData}}):e._e(),e._v(" "),e.isLastStep?e._e():o("ApprovedAction",{attrs:{approvedItemRecord:e.approvedItemRecord}})],1):e._e()],1)],1)},a=[];s._withStripped=!0;var r={render:s,staticRenderFns:a};t.default=r}});