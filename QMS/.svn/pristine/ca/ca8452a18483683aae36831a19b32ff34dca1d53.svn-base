webpackJsonp([42],{1217:function(t,e,i){"use strict";function a(t){r||i(2201)}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1942),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);var d=i(2203),l=i.n(d),r=!1,c=i(1),u=a,v=c(o.a,l.a,!1,u,null,null);v.options.__file="src/views/qms/view/feedback/ReturnGoods.vue",e.default=v.exports},1942:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{refunddata:[],productNames:[],form:{bsStatus:2},suppliers:[],products:[],refundModal:!1,approverModal:!1}},created:function(){this.getData()},methods:{getData:function(t){var e=this;this.api.supplierinfo.getlist({page:1,rows:100,keyWord:t}).then(function(t){e.suppliers=t.data.rows.map(function(t){return t.value=t.bsSuppChieseName,t})}),this.api.feedbackRefund.getlist().then(function(t){e.refunddata=t.data.rows})},getProductData:function(t){var e=this;this.api.productinfo.getlist({suppCode:t}).then(function(t){e.products=t.data.rows.map(function(t){return t.value=t.bsPrName,t})})},queryProduct:function(t,e){var i=this.products;e(t?i.filter(this.nameFilter(t)):i)},querySupplier:function(t,e){var i=this;this.api.supplierinfo.getlist({page:1,rows:100,keyWord:t}).then(function(t){i.suppliers=t.data.rows.map(function(t){return t.value=t.bsSuppChieseName,t}),e(i.suppliers)})},supplierFilter:function(t){return function(e){return 0===e.bsSuppChieseName.toLowerCase().indexOf(t.toLowerCase())}},productFileter:function(t){return function(e){return 0===e.bsPrName.toLowerCase().indexOf(t.toLowerCase())}},handleSelectSupplier:function(t){this.form.bsSuppId=t.id,this.form.bsSuppCompanyCode=t.bsSuppCode,this.getProductData(t.bsSuppCode)},handleSelectProduct:function(t){var e=this;this.form.bsPrId=t.id,this.form.bsPrName=t.bsPrName,this.form.bsPrCode=t.bsPrCode,void 0==this.form.id&&this.api.feedback.add(this.form).then(function(t){e.form.bsFeedbackId=t.data.id})},showrefundModal:function(){this.refundModal=!0},showApproverModal:function(){this.approverModal=!0},addrefundok:function(){var t=this;this.api.feedbackRefund.add(this.form).then(function(e){t.getData()})},deleterefund:function(t){var e=this;this.api.feedbackRefund.delete({id:t.row.id}).then(function(t){e.getData()}),this.api.feedback.delete({id:t.row.bsFeedbackId}).then(function(t){})},ok:function(){},cancel:function(){}}}},2201:function(t,e,i){var a=i(2202);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(29)("c042154a",a,!1)},2202:function(t,e,i){e=t.exports=i(28)(!1),e.push([t.i,'\n#basic-body1:after{\n\t\tcontent:".";\n\t\tvisibility:hidden;\n\t\tdisplay:block; \n\t\tclear:both;\n}\n#basic-body1 .basic-body-div{\n\t\tfloat: left;height: 50px;\n}\n#basic-body1 .basic-body-text{\n\t\tfloat: left;margin-top: 10px;width: auto;margin-left:20px;font-size: 14px;text-align: right;\n}\n#basic-body1 .basic-body-input{\n\t\tfloat: left;width: 200px;\n}\n#basic-body2:after{\n\t\tcontent:".";\n\t\tvisibility:hidden;\n\t\tdisplay:block; \n\t\tclear:both;\n}\n#basic-body3:after{\n\t\tcontent:".";\n\t\tvisibility:hidden;\n\t\tdisplay:block; \n\t\tclear:both;\n}\n.basic-body-div{\n\t\tfloat: left;height: 50px;\n}\n.basic-body-text{\n\t\tfloat: left;margin-top: 10px;width: 130px;font-size: 14px;text-align: right;\n}\n.basic-body-input{\n\t\tfloat: left;width: 250px;\n}\n.refund-body-div{\n\t\theight: 50px;\n}\n.refund-body-text{\n\t\tfloat: left;margin-top: 10px;width: 130px;font-size: 14px;text-align: right;\n}\n.refund-body-input{\n\t\tfloat: left;width: 300px;\n}\n#refund-body .ivu-checkbox-wrapper{\n        width: 160px;margin-top: 10px;margin-left: 10px;font-size: 14px;\n}\n#refund-why:after{\n        content:".";\n        visibility:hidden;\n        display:block; \n        clear:both;\n}\n',""])},2203:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{style:{marginBottom:"20px"}},[i("center",[i("h4",{staticStyle:{"font-size":"16px"}},[t._v("生成退款单")])])],1),t._v(" "),i("Row",{style:{marginBottom:"20px"}},[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[i("Icon",{staticStyle:{color:"#ff9900","font-size":"18px"},attrs:{type:"social-buffer"}}),t._v("\n                     基本信息\n               \t")],1),t._v(" "),i("div",[i("div",{attrs:{id:"basic-body1"}},[i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("供货公司：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-autocomplete",{staticStyle:{width:"200px"},attrs:{"fetch-suggestions":t.querySupplier},on:{select:t.handleSelectSupplier},model:{value:t.form.bsSuppCompanyName,callback:function(e){t.$set(t.form,"bsSuppCompanyName",e)},expression:"form.bsSuppCompanyName"}})],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("扣款单号：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("扣款日期：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("DatePicker",{staticStyle:{width:"200px"},attrs:{size:"large",type:"date",placeholder:"选择日期"}})],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("质量事故发生日期：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("DatePicker",{staticStyle:{width:"200px"},attrs:{size:"large",type:"date",placeholder:"选择日期"}})],1)])]),t._v(" "),i("div",{attrs:{id:"basic-body2"}},[i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("通知人：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("邮箱：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("电话：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)])]),t._v(" "),i("div",{attrs:{id:"basic-body3"}},[i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("客户：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("邮箱：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)]),t._v(" "),i("div",{staticClass:"basic-body-div"},[i("div",{staticClass:"basic-body-text"},[t._v("电话：")]),t._v(" "),i("div",{staticClass:"basic-body-input"},[i("el-input")],1)])])])])],1),t._v(" "),i("Row",{style:{marginBottom:"20px"}},[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[i("Icon",{staticStyle:{color:"#ff9900","font-size":"18px"},attrs:{type:"cash"}}),t._v("\n                     退款信息\n               \t")],1),t._v(" "),i("div",{attrs:{id:"refund-body"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.refunddata}},[i("el-table-column",{attrs:{prop:"id",label:"序号",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"bsReportNo",label:"客户报告号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"bsPrId",label:"产品编号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"bsNum",label:"数量"}}),t._v(" "),i("el-table-column",{attrs:{prop:"bsPrice",label:"单价"}}),t._v(" "),i("el-table-column",{attrs:{prop:"bsSum",label:"扣款金额"}}),t._v(" "),i("el-table-column",{attrs:{prop:"bsReason",label:"扣款原因"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("Button.operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.deleterefund(e)}}},[t._v("\n                                "+t._s(t.$t("Button.Delete"))+"\n                                ")])]}}])})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("center",[i("el-button",{staticStyle:{padding:"5px 10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.showrefundModal()}}},[t._v("\n            \t\t\t\t    添加退款项\n            \t\t\t     ")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"退款信息"},on:{"on-ok":t.addrefundok,"on-cancel":t.cancel},model:{value:t.refundModal,callback:function(e){t.refundModal=e},expression:"refundModal"}},[i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("产品：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-autocomplete",{staticStyle:{width:"300px"},attrs:{"fetch-suggestions":t.queryProduct},on:{select:t.handleSelectProduct},model:{value:t.form.bsPrName,callback:function(e){t.$set(t.form,"bsPrName",e)},expression:"form.bsPrName"}})],1)]),t._v(" "),i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("产品编号：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input",{model:{value:t.form.bsPrCode,callback:function(e){t.$set(t.form,"bsPrCode",e)},expression:"form.bsPrCode"}})],1)]),t._v(" "),i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("数量：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input",{model:{value:t.form.bsNum,callback:function(e){t.$set(t.form,"bsNum",e)},expression:"form.bsNum"}})],1)]),t._v(" "),i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("单价：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input",{model:{value:t.form.bsPrice,callback:function(e){t.$set(t.form,"bsPrice",e)},expression:"form.bsPrice"}})],1)]),t._v(" "),i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("扣款金额：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input",{model:{value:t.form.bsSum,callback:function(e){t.$set(t.form,"bsSum",e)},expression:"form.bsSum"}})],1)]),t._v(" "),i("div",{attrs:{id:"refund-why"}},[i("div",{staticClass:"refund-body-text"},[t._v("扣款原因：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input",{attrs:{type:"textarea"},model:{value:t.form.bsReason,callback:function(e){t.$set(t.form,"bsReason",e)},expression:"form.bsReason"}})],1)])]),t._v(" "),i("div",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[i("Alert",{attrs:{"show-icon":""}},[t._v("尊敬的供货公司，下述情况发生时，均将产生质量扣款：")]),t._v(" "),i("Checkbox",[t._v("货物拒绝或报废")]),t._v(" "),i("Checkbox",[t._v("货物紧急替换")]),t._v(" "),i("Checkbox",[t._v("客户现场分选货物")]),t._v(" "),i("Checkbox",[t._v("国外仓库分选货物")]),t._v(" "),i("Checkbox",[t._v("标签错误")]),t._v(" "),i("Checkbox",[t._v("客户让步接受差异")]),t._v(" "),i("Checkbox",[t._v("空运费")]),t._v(" "),i("Checkbox",[t._v("返工")]),t._v(" "),i("Checkbox",[t._v("客户罚款")]),t._v(" "),i("Checkbox",[t._v("货物退回供应商")]),t._v(" "),i("Checkbox",[t._v("货物参杂质")]),t._v(" "),i("Checkbox",[t._v("客户生产线断货")]),t._v(" "),i("Checkbox",[t._v("箱内货品数量不符")]),t._v(" "),i("Checkbox",[t._v("其他可能的费用(附件)")])],1)],1)])],1),t._v(" "),i("Row",{style:{marginBottom:"20px"}},[i("Card",[i("p",{attrs:{slot:"title"},slot:"title"},[i("Icon",{staticStyle:{color:"#ff9900","font-size":"18px"},attrs:{type:"compose"}}),t._v("\n                     审批信息\n               \t")],1),t._v(" "),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.refunddata}},[i("el-table-column",{attrs:{prop:"",label:"部门",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"职位"}}),t._v(" "),i("el-table-column",{attrs:{prop:"",label:"日期"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("Button.operating")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"}},[t._v(t._s(t.$t("Button.confirm")))]),t._v(" "),i("el-button",{attrs:{size:"mini"}},[t._v(t._s(t.$t("Button.Delete")))])]}}])})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[i("center",[i("el-button",{staticStyle:{padding:"5px 10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.showApproverModal()}}},[t._v("\n                            添加审批人\n                            ")])],1)],1),t._v(" "),i("Modal",{attrs:{title:"审批人信息"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.approverModal,callback:function(e){t.approverModal=e},expression:"approverModal"}},[i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("审批人：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("Select",{staticStyle:{width:"300px",display:"inline-block"},attrs:{size:"large",placeholder:"选择"},model:{value:t.productNames,callback:function(e){t.productNames=e},expression:"productNames"}},t._l(t.productNames,function(t){return i("Option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("名称：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input")],1)]),t._v(" "),i("div",{staticClass:"refund-body-div"},[i("div",{staticClass:"refund-body-text"},[t._v("职位：")]),t._v(" "),i("div",{staticClass:"refund-body-input"},[i("el-input")],1)])]),t._v(" "),i("Alert",{attrs:{"show-icon":""}},[t._v("质量扣款超过10,000人名币需要商务部经理确认")])],1)])],1)],1)},s=[];a._withStripped=!0;var o={render:a,staticRenderFns:s};e.default=o}});