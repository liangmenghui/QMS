webpackJsonp([4],{1957:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{form:{},bsCode:"",bsName:"",selectedFlow:{},flowdata:[],bsCodeLabel:"",bsNameLabel:"",params:{},todoInfo:{}}},created:function(){this.todoInfo=this.$store.getters.getTodoData;var t=this.$route.query;this.params=t,void 0!=t.supplier?(this.form.bsSuppId=t.supplier,this.bsCodeLabel=this.$t("supplier.code"),this.bsNameLabel=this.$t("supplier.name")):void 0!=t.product&&(this.form.bsPrId=t.product,this.bsCodeLabel=this.$t("product.code"),this.bsNameLabel=this.$t("product.name")),this.getData(),this.getInfo()},methods:{getData:function(t){var e=this,o=this.form;this.api.ApprovedFlow.getlist().then(function(t){e.flowdata=[];for(var s=0;s<t.data.rows.length;s++){var a=t.data.rows[s];void 0!=o.bsPrId&&a.bsType<=20&&(void 0!=e.todoInfo.bsExtend?12==a.bsType&&e.flowdata.push(a):e.flowdata.push(a)),void 0!=o.bsSuppId&&a.bsType>20&&e.flowdata.push(a)}})},getInfo:function(){var t=this;void 0!=this.form.bsPrId&&this.api.productinfo.getlist({id:this.form.bsPrId}).then(function(e){t.bsCode=e.data.rows[0].bsPrCode,t.bsName=e.data.rows[0].bsPrName}),void 0!=this.form.bsSuppId&&this.api.supplierinfo.getlist({id:this.form.bsSuppId}).then(function(e){t.bsCode=e.data.rows[0].bsSuppChieseName,t.bsName=e.data.rows[0].bsSuppCode})},createApporvedRecord:function(){var t=this;this.form.bsFlowId=this.selectedFlow.id,this.form.bsType=this.selectedFlow.bsType,this.api.approvedFlowRecord.add(this.form).then(function(e){if(t.$router.push({path:"approved",query:{bsFlowRecordId:e.data.id}}),t.$Message.info(t.$t("approved.create-success")),25==t.todoInfo.bsType){var o={bsOrderId:t.todoInfo.bsExtend,bsFlowRecordId:e.data.id};t.api.shipmentInspect.add(o).then(function(t){})}})}}}},2180:function(t,e,o){var s=o(2181);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);o(19)("027255f4",s,!1)},2181:function(t,e,o){e=t.exports=o(18)(!1),e.push([t.i,'\nhr{\r\n  border: none;\r\n  height: 1px;\r\n  background-color: #DDDDDD;\n}\n.createtitle{\r\n    padding-left:5%;height: 50px;font-size: 16px;font-family: "Microsoft YaHei";\r\n    background: #f2f7fb;line-height: 50px;\n}\n.createtitle .el-icon-circle-plus-outline{color:#2196f3!important; font-size: 16px;\n}\n.CreateBtn{margin-left: 100px;margin-top:80px; max-width: 368px;\n}\n.layout-content{min-height: 500px; background: #fff\n}\r\n\r\n\r\n',""])},2182:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"layout-content",staticStyle:{padding:"15px"}},[o("div",{staticClass:"createtitle"},[o("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("\n           "+t._s(t.$t("product.NewAudit"))+"\n        ")]),t._v(" "),o("div",{staticClass:"ivu-col-span-10",staticStyle:{margin:"4%"}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:t.bsCodeLabel,prop:"bsSuppCode"}},[o("el-input",{staticStyle:{width:"380px"},attrs:{readonly:""},model:{value:t.bsCode,callback:function(e){t.bsCode=e},expression:"bsCode"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.bsNameLabel,prop:"bsSuppChieseName"}},[o("el-input",{staticStyle:{width:"380px"},attrs:{readonly:""},model:{value:t.bsName,callback:function(e){t.bsName=e},expression:"bsName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("approved.flow")}},[o("el-select",{staticStyle:{width:"380px"},attrs:{"value-key":"id",placeholder:t.$t("choose")},model:{value:t.selectedFlow,callback:function(e){t.selectedFlow=e},expression:"selectedFlow"}},t._l(t.flowdata,function(e){return o("el-option",{key:e.id,attrs:{label:e.bsName,value:e}},[o("span",{staticStyle:{float:"left"}},[t._v(t._s(e.bsName))]),t._v(" "),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.approvedBy.bsName))])])}))],1),t._v(" "),o("i-button",{staticClass:"CreateBtn",attrs:{type:"success",long:"",icon:"plus-round"},on:{click:function(e){t.createApporvedRecord()}}},[t._v(t._s(t.$t("approved.create")))])],1)],1)])},a=[];s._withStripped=!0;var i={render:s,staticRenderFns:a};e.default=i},506:function(t,e,o){"use strict";function s(t){d||o(2180)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1957),i=o.n(a);for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);var n=o(2182),l=o.n(n),d=!1,p=o(1),c=s,u=p(i.a,l.a,!1,c,null,null);u.options.__file="src/views/qms/view/approved/ApprovedRecordCreator.vue",e.default=u.exports}});