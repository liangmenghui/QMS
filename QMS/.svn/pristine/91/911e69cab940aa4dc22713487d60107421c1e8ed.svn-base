webpackJsonp([86],{1153:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1702),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var s=i(1713),r=i.n(s),l=i(1),c=l(a.a,r.a,!1,null,null,null);c.options.__file="src/view/logistics/booking/generate.vue",e.default=c.exports},1702:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(17),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={props:{cabinets:{type:[Object,Array],required:!0}},data:function(){return{currentContextView:"",mutliAgent:!1,initializeState:!1,validateResult:!0,loading:!1,agents:[{agent:"",desc:"请选择货代"}],form:{customer:"",agent:""},content:""}},methods:{handleSubmit:function(){var t=this.$refs.content.getData;if(!t)return void this.$Message.error("插件错误,未实现 getData");t()},handleCommit:function(t){var e=this;(0,a.default)(t)&&this.api.lmp.booking.saveContent({customer:this.form.customer,agent:this.form.agent,formData:(0,a.default)(t)}).then(function(t){t.result&&(e.$Message.success("保存成功"),e.modalHidden())})},initCustomer:function(){var t=this;this.api.lmp.booking.getCustomerByPlan(this.cabinets).then(function(e){if(e.result){var i=[{customer:"",desc:"请选择客户"}];t.form.customer="",e.data.forEach(function(t){i.push({customer:t.bsCode,desc:t.bsName})}),t.customers=i,t.customers.length>1&&(t.form.customer=t.customers[1].customer),t.initAgent()}})},initAgent:function(){var t=this;this.api.lmp.booking.getAgentByPlan(this.cabinets).then(function(e){if(e.result){if(0==e.data.length)return t.$Message.error("找不到对应的货代信息。"),void t.modalHidden();var i=[{agent:"",name:name,url:"",desc:"请选择货代"}];t.form.agent="",e.data.forEach(function(t){i.push({agent:t.bsProvider,desc:t.bsProvider})}),t.agents=i,2==t.agents.length?(t.form.agent=t.agents[1].agent,t.mutliAgent=!1):t.agents.length>2&&(t.mutliAgent=!0),t.initializeState=!0}})},loadPageView:function(){var t=this;this.api.lmp.booking.getContextByPlan({customer:this.form.customer,agent:this.form.agent}).then(function(e){if(e.result){var i=e.data;if(void 0===i||0==i.length||null===i)return void t.$Message.error("获取页面错误。");var n=e.data;t.currentContextView=n,t.api.lmp.booking.getContextData({customer:t.form.customer,agent:t.form.agent,cabinets:t.cabinets}).then(function(e){if(e.result){var i=JSON.parse((0,a.default)(e.data));t.content=i}})}})},init:function(){this.initializeState=!1,this.initCustomer()},modalHidden:function(){this.$emit("close")},handleValidate:function(t,e){"boolean"==typeof t&&!1===t&&(void 0!=e&&null!=e&&this.$Message.error(e),this.validateResult=t)}},watch:{initializeState:function(){1==this.initializeState&&this.$emit("initializeClosing")},pageView:function(){void 0!==this.form.customer&&0!=this.form.customer.length&&void 0!==this.form.agent&&0!=this.form.agent.length&&this.loadPageView()},customer:function(){this.customer.length>0&&this.initAgent()}},computed:{pageView:function(){return{customer:this.form.customer,agent:this.form.agent}}}}},1713:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",[i("i-col",{attrs:{span:"24"}},[1==t.mutliAgent?i("div",[i("div",{staticStyle:{padding:"0 0 24px","line-height":"32px","font-size":"12px"}},[i("div",{staticStyle:{display:"inline-block"}},[i("p",{staticStyle:{width:"100px",display:"inline-block","text-align":"right","margin-right":"20px"}},[t._v("客户:")]),t._v(" "),i("Select",{staticStyle:{width:"200px"},model:{value:t.form.customer,callback:function(e){t.$set(t.form,"customer",e)},expression:"form.customer"}},t._l(t.customers,function(e){return i("Option",{key:e.customer,attrs:{value:e.customer}},[t._v(t._s(e.desc))])}))],1),t._v(" "),i("div",{staticStyle:{display:"inline-block"}},[i("p",{staticStyle:{width:"100px",display:"inline-block","text-align":"right","margin-right":"20px"}},[t._v("货代:")]),t._v(" "),i("i-select",{staticStyle:{width:"200px"},model:{value:t.form.agent,callback:function(e){t.$set(t.form,"agent",e)},expression:"form.agent"}},t._l(t.agents,function(e){return i("Option",{key:e.agent,attrs:{value:e.agent}},[t._v(t._s(e.desc))])}))],1)])]):t._e(),t._v(" "),0==t.mutliAgent?i("div",[i("div",{staticStyle:{padding:"0 0 24px","line-height":"32px","font-size":"12px"}},[i("div",{staticStyle:{display:"inline-block"}},[i("p",{staticStyle:{width:"100px",display:"inline-block","text-align":"right","margin-right":"20px"}},[t._v("客户:")]),t._v(" "),i("p",{staticStyle:{width:"200px",display:"inline"}},[t._v(t._s(t.form.customer))])]),t._v(" "),i("div",{staticStyle:{display:"inline-block"}},[i("p",{staticStyle:{width:"100px",display:"inline-block","text-align":"right","margin-right":"20px"}},[t._v("货代:")]),t._v(" "),i("p",{staticStyle:{width:"200px",display:"inline"}},[t._v(t._s(t.form.agent))])])])]):t._e()])],1),t._v(" "),i("Row",[i("i-col",{attrs:{span:"24"}},[i(t.currentContextView,{ref:"content",tag:"component",attrs:{cabinets:t.cabinets,customer:t.form.customer,agent:t.form.agent,contentData:t.content},on:{"on-commit":t.handleCommit}})],1)],1),t._v(" "),i("Row",[i("i-col",{attrs:{span:"24"}},[i("div",{staticStyle:{height:"86px","padding-top":"24px","background-color":"#f1f2f3"}},[i("Button",{staticStyle:{float:"right","margin-right":"60px"},attrs:{type:"success",size:"large",loading:t.loading},on:{click:t.handleSubmit}},[t._v("保存")])],1)])],1)],1)},a=[];n._withStripped=!0;var o={render:n,staticRenderFns:a};e.default=o}});