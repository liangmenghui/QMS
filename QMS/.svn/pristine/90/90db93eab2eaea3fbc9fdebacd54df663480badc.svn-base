webpackJsonp([43],{1216:function(t,e,s){"use strict";function o(t){d||s(2198)}Object.defineProperty(e,"__esModule",{value:!0});var a=s(1941),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);var r=s(2200),p=s.n(r),d=!1,l=s(1),c=o,u=l(i.a,p.a,!1,c,null,null);u.options.__file="src/views/qms/view/feedback/FeedbackReport.vue",e.default=u.exports},1941:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(16),a=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={data:function(){return{form:{bsStatus:1,bsType:1},products:[],suppliers:[],file:{},fileList:[]}},created:function(){this.fileList.map(function(t){return t.name=t.fsFileBy.bsName+t.fsFileBy.bsFileType,t}),this.getProductData("")},methods:{getSupplierData:function(t){var e=this;this.api.supplierinfo.getlist({page:1,rows:10,bsSuppCode:t}).then(function(t){e.suppliers=t.data.rows.map(function(t){return t.value=t.bsSuppChieseName,t}),e.suppliers.length>0&&e.handleSelectSupplier(e.suppliers[0])})},getProductData:function(t){var e=this;this.api.productinfo.getlist({page:1,rows:100,keyWord:t}).then(function(t){e.products=t.data.rows.map(function(t){return t.value=t.bsPrName+"("+t.bsSuppChieseName+")",t})})},queryProduct:function(t,e){var s=this;this.api.productinfo.getlist({page:1,rows:200,keyWord:t}).then(function(t){s.products=t.data.rows.map(function(t){return t.value=t.bsPrName+"("+t.bsSuppChieseName+")",t}),e(s.products)})},productFileter:function(t){return function(e){return 0===e.bsPrName.toLowerCase().indexOf(t.toLowerCase())}},handleSelectSupplier:function(t){this.form.bsSuppId=t.id,this.form.bsSuppCompanyName=t.bsSuppChieseName,this.form.bsSuppCompanyEmail=t.bsSuppEmail,this.form.bsSuppCompanyMobile=t.bsSuppMobile,this.form.bsSuppCompanyPersion=t.bsSuppContactName,this.form.bsSuppCompanyCode=t.bsSuppCode},handleSelectProduct:function(t){this.form.bsPrId=t.id,this.form.bsPrName=t.bsPrName,this.form.bsPrCode=t.bsPrCode,this.getSupplierData(t.bsSuppCode)},submitFeeback:function(){var t=this;this.fileList.length>0&&(this.form.fileIdStr=this.fileList.map(function(t){return t.id}).toString()),void 0==this.form.id?this.api.feedback.add(this.form).then(function(e){t.form.id=e.data.id,t.$router.push({path:"/qms/feedback/details",query:{feedbackId:e.data.id}}),t.$Message.info("提交成功")}):this.api.feedback.edit(this.form).then(function(e){t.$Message.info("修改成功")})},handleUpload:function(t){var e=this;this.file=t;var s=new FormData;return s.append("file",this.file),this.api.fileQms.upload(s).then(function(t){if(t.result){var s=(0,a.default)(t.data,{name:e.file.name});e.fileList.push(s)}else e.$Message.error(t.msg)}),!0},downloadFile:function(t){var e={fsFileId:t.id};console.log(e),this.api.fileQms.getfile(e).then(function(t){t.click()})},handleRemove:function(t,e){var s=this,o={id:t.id};this.api.approvedItemsRecordFile.delete(o).then(function(t){t.result?(s.fileList.remove(),s.$Message.info("删除成功")):s.$Message.error(t.msg)})}}}},2198:function(t,e,s){var o=s(2199);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s(29)("919b04d2",o,!1)},2199:function(t,e,s){e=t.exports=s(28)(!1),e.push([t.i,'\n.ApprovedFlowManagement .ivu-table {\n  font-size: 14px;\n}\n.ApprovedTermsManagement .ivu-table-cell {\n  font-size: 14px;\n}\n.SampleManagement .ivu-table {\n  font-size: 14px;\n}\n.SampleRegularManagement .ivu-table {\n  font-size: 14px;\n}\n.feedbackreport #customer-body:after {\n  content: ".";\n  visibility: hidden;\n  display: block;\n  clear: both;\n}\n.feedbackreport .customer-body-div {\n  height: 50px;\n  float: left;\n}\n.feedbackreport .customer-body-text {\n  float: left;\n  margin-top: 10px;\n  width: 130px;\n  font-size: 14px;\n  text-align: right;\n}\n.feedbackreport .customer-body-input {\n  float: left;\n}\n.feedbackreport .customer-body-input .el-input {\n  width: 300px;\n  color: #444;\n}\n.feedbackreport #supplier-body:after {\n  content: ".";\n  visibility: hidden;\n  display: block;\n  clear: both;\n}\n.feedbackreport .supplier-body-div {\n  height: 50px;\n  float: left;\n}\n.feedbackreport .supplier-body-text {\n  float: left;\n  margin-top: 10px;\n  width: 130px;\n  font-size: 14px;\n  text-align: right;\n}\n.feedbackreport .supplier-body-input {\n  float: left;\n}\n.feedbackreport .supplier-body-input .el-input {\n  width: 300px;\n  color: #444;\n}\n.feedbackreport #product-body:after {\n  content: ".";\n  visibility: hidden;\n  display: block;\n  clear: both;\n}\n.feedbackreport .product-body-div {\n  height: 50px;\n  float: left;\n}\n.feedbackreport .product-body-text {\n  float: left;\n  margin-top: 10px;\n  width: 130px;\n  font-size: 14px;\n  text-align: right;\n}\n.feedbackreport .product-body-input {\n  float: left;\n}\n.feedbackreport .product-body-input .el-input {\n  width: 300px;\n  color: #444;\n}\n.feedbackreport #feedback-body {\n  padding-top: 10px;\n  padding-bottom: 50px;\n  padding-left: 3%;\n}\n.feedbackreport #feedback-body-picture {\n  margin-top: 30px;\n}\n.feedbackreport #feedback-body-picture p {\n  font-size: 14px;\n}\n.feedbackreport .el-icon-plus {\n  display: block;\n  font-size: 30px;\n}\n.Upload {\n  margin-top: 15px;\n  width: 45%;\n}\n',""])},2200:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"feedbackreport"},[s("Row",{attrs:{gutter:10}},[s("Col",{style:{marginBottom:"20px"},attrs:{md:24}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"person"}}),t._v("\n                         "+t._s(t.$t("feedback.CustomerInformation"))+"\n                   \t")],1),t._v(" "),s("div",{attrs:{id:"customer-body"}},[s("div",{staticClass:"customer-body-div"},[s("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.CusCompanyName"))+"：")]),t._v(" "),s("div",{staticClass:"customer-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyName,callback:function(e){t.$set(t.form,"bsCusCompanyName",e)},expression:"form.bsCusCompanyName"}})],1)]),t._v(" "),s("div",{staticClass:"customer-body-div"},[s("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.CustomerID"))+"：")]),t._v(" "),s("div",{staticClass:"customer-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyCode,callback:function(e){t.$set(t.form,"bsCusCompanyCode",e)},expression:"form.bsCusCompanyCode"}})],1)]),t._v(" "),s("div",{staticClass:"customer-body-div"},[s("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.ContactName"))+"：")]),t._v(" "),s("div",{staticClass:"customer-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyPerson,callback:function(e){t.$set(t.form,"bsCusCompanyPerson",e)},expression:"form.bsCusCompanyPerson"}})],1)]),t._v(" "),s("div",{staticClass:"customer-body-div"},[s("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.ContactNumber"))+"：")]),t._v(" "),s("div",{staticClass:"customer-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyMobile,callback:function(e){t.$set(t.form,"bsCusCompanyMobile",e)},expression:"form.bsCusCompanyMobile"}})],1)]),t._v(" "),s("div",{staticClass:"customer-body-div"},[s("div",{staticClass:"customer-body-text"},[t._v(t._s(t.$t("feedback.ContactEmail"))+"：")]),t._v(" "),s("div",{staticClass:"customer-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsCusCompanyEmail,callback:function(e){t.$set(t.form,"bsCusCompanyEmail",e)},expression:"form.bsCusCompanyEmail"}})],1)])])])],1),t._v(" "),s("Col",{style:{marginBottom:"20px"},attrs:{md:24}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"cube"}}),t._v("\n                         "+t._s(t.$t("feedback.ProductInformation"))+"\n                    ")],1),t._v(" "),s("div",{attrs:{id:"product-body"}},[s("div",{staticClass:"product-body-div"},[s("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.ProductName"))+"：")]),t._v(" "),s("div",{staticClass:"product-body-input"},[s("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"300px"},attrs:{"fetch-suggestions":t.queryProduct},on:{select:t.handleSelectProduct},model:{value:t.form.bsPrName,callback:function(e){t.$set(t.form,"bsPrName",e)},expression:"form.bsPrName"}})],1)]),t._v(" "),s("div",{staticClass:"product-body-div"},[s("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.ProductNumber"))+"：")]),t._v(" "),s("div",{staticClass:"product-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsPrCode,callback:function(e){t.$set(t.form,"bsPrCode",e)},expression:"form.bsPrCode"}})],1)]),t._v(" "),s("div",{staticClass:"product-body-div"},[s("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.amount"))+"：")]),t._v(" "),s("div",{staticClass:"product-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsPrNum,callback:function(e){t.$set(t.form,"bsPrNum",e)},expression:"form.bsPrNum"}})],1)]),t._v(" "),s("div",{staticClass:"product-body-div"},[s("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.place"))+"：")]),t._v(" "),s("div",{staticClass:"product-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsReportLocation,callback:function(e){t.$set(t.form,"bsReportLocation",e)},expression:"form.bsReportLocation"}})],1)]),t._v(" "),s("div",{staticClass:"product-body-div"},[s("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.origin"))+"：")]),t._v(" "),s("div",{staticClass:"product-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsProductLocation,callback:function(e){t.$set(t.form,"bsProductLocation",e)},expression:"form.bsProductLocation"}})],1)]),t._v(" "),s("div",{staticClass:"product-body-div"},[s("div",{staticClass:"product-body-text"},[t._v(t._s(t.$t("feedback.TheDateOfProduction"))+"：")]),t._v(" "),s("div",{staticClass:"product-body-input"},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.bsProductDate,callback:function(e){t.$set(t.form,"bsProductDate",e)},expression:"form.bsProductDate"}})],1)])])])],1),t._v(" "),s("Col",{style:{marginBottom:"20px"},attrs:{md:24}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"ios-folder"}}),t._v("\n                         "+t._s(t.$t("feedback.SupplierInformation"))+"\n                   \t")],1),t._v(" "),s("div",{attrs:{id:"supplier-body"}},[s("div",{staticClass:"supplier-body-div"},[s("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.SupplierName"))+"：")]),t._v(" "),s("div",{staticClass:"supplier-body-input"},[s("el-input",{staticClass:"inline-input",staticStyle:{width:"300px"},model:{value:t.form.bsSuppCompanyName,callback:function(e){t.$set(t.form,"bsSuppCompanyName",e)},expression:"form.bsSuppCompanyName"}})],1)]),t._v(" "),s("div",{staticClass:"supplier-body-div"},[s("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.SupplierID"))+"：")]),t._v(" "),s("div",{staticClass:"supplier-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyCode,callback:function(e){t.$set(t.form,"bsSuppCompanyCode",e)},expression:"form.bsSuppCompanyCode"}})],1)]),t._v(" "),s("div",{staticClass:"supplier-body-div"},[s("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.ContactName"))+"：")]),t._v(" "),s("div",{staticClass:"supplier-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyPerson,callback:function(e){t.$set(t.form,"bsSuppCompanyPerson",e)},expression:"form.bsSuppCompanyPerson"}})],1)]),t._v(" "),s("div",{staticClass:"supplier-body-div"},[s("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.ContactNumber"))+"：")]),t._v(" "),s("div",{staticClass:"supplier-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyMobile,callback:function(e){t.$set(t.form,"bsSuppCompanyMobile",e)},expression:"form.bsSuppCompanyMobile"}})],1)]),t._v(" "),s("div",{staticClass:"supplier-body-div"},[s("div",{staticClass:"supplier-body-text"},[t._v(t._s(t.$t("feedback.ContactEmail"))+"：")]),t._v(" "),s("div",{staticClass:"supplier-body-input"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.bsSuppCompanyEmail,callback:function(e){t.$set(t.form,"bsSuppCompanyEmail",e)},expression:"form.bsSuppCompanyEmail"}})],1)])])])],1)],1),t._v(" "),s("Row",[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{staticStyle:{color:"#ff9900"},attrs:{type:"chatbox-working"}}),t._v("\n                     "+t._s(t.$t("feedback.CustomerComplaintInformation"))+"\n               \t")],1),t._v(" "),s("div",{attrs:{id:"feedback-body"}},[s("div",[s("p",{staticStyle:{"font-size":"14px","margin-top":"30px"}},[t._v(t._s(t.$t("feedback.ProblemDescription")))]),t._v(" "),s("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入内容"},model:{value:t.form.bsProblemDesc,callback:function(e){t.$set(t.form,"bsProblemDesc",e)},expression:"form.bsProblemDesc"}})],1),t._v(" "),s("div",{attrs:{id:"feedback-body-picture"}},[s("p",[t._v(t._s(t.$t("feedback.RelatedImages")))]),t._v(" "),s("div",{staticClass:"Upload"},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"","before-upload":t.handleUpload,"on-preview":t.downloadFile,"on-remove":t.handleRemove,"file-list":t.fileList}},[s("el-button",{attrs:{size:"medium",type:"success",plain:""}},[t._v("\n\t\t\t\t\t\t\t    "+t._s(t.$t("upcoming.UploadAttachment"))+"\n\t\t\t\t\t\t\t  ")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)])])])],1),t._v(" "),s("div",{staticStyle:{"margin-bottom":"100px","margin-top":"50px"}},[s("center",[s("el-button",{staticStyle:{width:"10%",padding:"7px 0"},attrs:{type:"primary"},on:{click:t.submitFeeback}},[t._v(t._s(t.$t("feedback.submit")))])],1)],1)],1)},a=[];o._withStripped=!0;var i={render:o,staticRenderFns:a};e.default=i}});