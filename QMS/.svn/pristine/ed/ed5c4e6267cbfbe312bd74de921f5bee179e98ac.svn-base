webpackJsonp([41],{1029:function(t,e,a){"use strict";function o(t){d||a(1757)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(1590),i=a.n(r);for(var l in r)"default"!==l&&function(t){a.d(e,t,function(){return r[t]})}(l);var n=a(1759),s=a.n(n),d=!1,p=a(1),u=o,m=p(i.a,s.a,!1,u,null,null);m.options.__file="src\\view\\settings\\ApprovedFlowManagement.vue",e.default=m.exports},1590:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(15),i=o(r),l=a(11),n=o(l);e.default={data:function(){var t=this;return{showRooterView:!1,dialog:{modal_dialog:!1,formItem:{},ruleForm:{bsName:[{required:!0,message:"请填写名称",trigger:"blur"}],bsType:[{required:!0,message:"请填写审核类型",trigger:"blur"}],bsApprovederId:[{required:!0,message:"请选择负责人",trigger:"blur"}]}},datagrid:{queryParams:{page:1,rows:25,pkParent:-1},pagination:[25,50,100],data:{rows:[],total:0},columns:[{title:this.$t("ApprovedFlow.Process-M"),key:"bsName"},{title:this.$t("ApprovedFlow.FlowType"),key:"bsType",render:function(e,a){return e("span",t.$t("approved.type["+a.row.bsType+"]"))}},{title:this.$t("ApprovedFlow.Principal"),key:"bsApproveded",render:function(t,e){return t("span",e.row.approvedBy.bsName)}},{title:this.$t("ApprovedFlow.Operating"),key:"action",render:function(e,a){var o=[];return o.push(e("Button",{props:{type:"primary",size:"small",disabled:!t.$Util.hasPerm("EDIT")},style:{marginRight:"5px"},on:{click:function(){t.showEditDialog(a)}}},t.$t("Button.Edit"))),o.push(e("Button",{props:{type:"error",size:"small",disabled:!t.$Util.hasPerm("DELETE")},on:{click:function(){t.delete(a)}}},t.$t("Button.Delete"))),e("div",o)}}]},users:[]}},created:function(){this.getData(),this.showRooterView=this.$route.matched.length>2},beforeUpdate:function(){this.showRooterView=this.$route.matched.length>2},watch:{$route:function(t,e){this.showRooterView=t.matched.length>2}},methods:{handleSubmit:function(t){this.getData()},getData:function(){var t=this;this.api.ApprovedFlow.getlist(this.datagrid.queryParams).then(function(e){t.datagrid.data=e.data}),this.api.user.getlist().then(function(e){t.users=e.data.rows})},reloadData:function(){this.getData()},changePage:function(t){this.datagrid.queryParams.page=t,this.datagrid.data=this.getData()},delete:function(t){var e=this;this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",onOk:function(){e.api.ApprovedFlow.delete({id:t.row.id}).then(function(t){t.result?(e.reloadData(),e.$Modal.remove(),e.$Message.info("删除成功")):e.$Message.error(t.msg)})}})},showAddDialog:function(){this.dialog.formItem={bsCanYield:0,bsApprovedStatus:0,bsRejectStatus:0},this.dialog.modal_dialog=!0},showEditDialog:function(t){this.dialog.formItem=this.$Util.formattedParams(t.row),this.dialog.formItem.bsApprovederId=this.dialog.formItem.approvedBy.id,this.dialog.formItem.index=t.index,delete this.dialog.formItem.approvedBy,this.dialog.modal_dialog=!0},ok:function(){var t=this;this.$refs["dialog.formItem"].validate(function(e){e?void 0!=(0,n.default)(t.dialog.formItem.id)&&"number"==typeof t.dialog.formItem.id?t.api.ApprovedFlow.edit(t.dialog.formItem).then(function(e){t.$store.commit("updateFlowDataStates",(0,i.default)(t.datagrid.data.rows[t.dialog.formItem.index],t.dialog.formItem)),t.$router.push("approvedFlowManagement/flowSettings")}):t.api.ApprovedFlow.add(t.dialog.formItem).then(function(e){e.data.approvedBy={bsName:"administrator"},t.$store.commit("updateFlowDataStates",e.data),t.$router.push("approvedFlowManagement/flowSettings")}):t.$Message.info(t.$t("Error.ParamsRequire"))})},cancel:function(){}}}},1757:function(t,e,a){var o=a(1758);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(28)("f0875086",o,!1,{})},1758:function(t,e,a){e=t.exports=a(27)(!1),e.push([t.i,"\n.ApprovedFlowManagement .ivu-table {\n  font-size: 14px;\n}\n.ApprovedTermsManagement .ivu-table-cell {\n  font-size: 14px;\n}\n.SampleManagement .ivu-table {\n  font-size: 14px;\n}\n.SampleRegularManagement .ivu-table {\n  font-size: 14px;\n}\n.el-textarea__inner {\n  width: 85%;\n}\n.el-form-item {\n  margin-bottom: 14px;\n}\n.searchbox {\n  width: 100%;\n  height: 40px;\n}\n.ivu-input {\n  margin-top: 14px;\n  display: inline-block;\n  width: 200px;\n  height: 38px;\n  padding: 11px 10px;\n  font-size: 12px;\n  border: 1px solid #dddee1;\n  /*border-radius: 4px;*/\n  color: #495060;\n  background-color: #fff;\n  background-image: none;\n  position: relative;\n  cursor: text;\n  /*margin-top:16px;*/\n  transition: border 0.2s ease-in-out, background 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n}\n.addform {\n  width: 480px;\n}\n.addform .el-input {\n  width: 300px;\n}\n.searchbtn .el-button {\n  border-radius: 0px;\n  padding: 11px 14px;\n}\n.toolbar .el-form--inline .el-form-item {\n  vertical-align: baseline;\n}\n.tip {\n  margin-left: 70px;\n  color: #777;\n}\n",""])},1759:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showRooterView?t.showRooterView?a("div",[a("router-view")],1):t._e():a("div",{staticClass:"ApprovedFlowManagement"},[a("div",[a("el-Row",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"medium",placeholder:t.$t("Button.Keyword-search")},model:{value:t.datagrid.queryParams.keyWord,callback:function(e){t.$set(t.datagrid.queryParams,"keyWord",e)},expression:"datagrid.queryParams.keyWord"}}),t._v(" "),a("el-button",{staticStyle:{padding:"10px 10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.handleSubmit("formQuery")}}},[t._v("\n                \t\t"+t._s(t.$t("Button.Inquire"))+"\n                \t")]),t._v(" "),a("el-button",{directives:[{name:"perm-add",rawName:"v-perm-add"}],staticStyle:{padding:"10px 10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.showAddDialog()}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("Button.Addprocess"))+"\n\t\t\t\t\t")])],1),t._v(" "),a("el-Row",[a("el-col",{attrs:{span:24}},[a("Table",{attrs:{data:t.datagrid.data.rows,columns:t.datagrid.columns}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.datagrid.data.total,current:1,"page-size":t.datagrid.queryParams.rows,"page-size-opts":t.datagrid.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage}})],1)])],1)],1),t._v(" "),a("Modal",{attrs:{title:t.$t("ApprovedFlow.ProcessInformation")},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.dialog.modal_dialog,callback:function(e){t.$set(t.dialog,"modal_dialog",e)},expression:"dialog.modal_dialog"}},[a("p",[a("el-form",{ref:"dialog.formItem",staticClass:"addform",attrs:{model:t.dialog.formItem,rules:t.dialog.ruleForm,"label-width":"80"}},[a("el-form-item",{attrs:{label:t.$t("ApprovedFlow.Process-M"),prop:"bsName"}},[a("el-input",{model:{value:t.dialog.formItem.bsName,callback:function(e){t.$set(t.dialog.formItem,"bsName",e)},expression:"dialog.formItem.bsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("ApprovedFlow.FlowType"),prop:"bsType"}},[a("el-select",{model:{value:t.dialog.formItem.bsType,callback:function(e){t.$set(t.dialog.formItem,"bsType",e)},expression:"dialog.formItem.bsType"}},[a("el-option",{attrs:{label:t.$t("approved.type[11]"),value:11}}),t._v(" "),a("el-option",{attrs:{label:t.$t("approved.type[12]"),value:12}}),t._v(" "),a("el-option",{attrs:{label:t.$t("approved.type[21]"),value:21}}),t._v(" "),a("el-option",{attrs:{label:t.$t("approved.type[22]"),value:22}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("ApprovedFlow.Principal"),prop:"bsApprovederId"}},[t._v("  \n                                "),a("el-select",{attrs:{placeholder:"请输入"},model:{value:t.dialog.formItem.bsApprovederId,callback:function(e){t.$set(t.dialog.formItem,"bsApprovederId",e)},expression:"dialog.formItem.bsApprovederId"}},t._l(t.users,function(t){return a("el-option",{key:t.id,attrs:{label:t.bsName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("approved.can_yield"),prop:"bsCanYield"}},[a("el-select",{staticStyle:{width:"280px"},model:{value:t.dialog.formItem.bsCanYield,callback:function(e){t.$set(t.dialog.formItem,"bsCanYield",e)},expression:"dialog.formItem.bsCanYield"}},[a("el-option",{attrs:{label:t.$t("approved.yield[0]"),value:0}}),t._v(" "),a("el-option",{attrs:{label:t.$t("approved.yield[1]"),value:1}})],1),t._v(" "),a("p",{staticClass:"tip"},[t._v("\n                                    *(在审核项目未是否能继续进行审核)\n                                ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"通过状态",prop:"bsApprovedStatus"}},[a("el-select",{staticStyle:{width:"280px"},model:{value:t.dialog.formItem.bsApprovedStatus,callback:function(e){t.$set(t.dialog.formItem,"bsApprovedStatus",e)},expression:"dialog.formItem.bsApprovedStatus"}},[t._l(t.$t("product.StatusDesc"),function(e,o){return t.dialog.formItem.bsType<=20?a("el-option",{attrs:{label:t.$t("product.StatusDesc["+o+"]"),value:o}}):t._e()}),t._v(" "),t._l(t.$t("supplier.StatusDesc"),function(e,o){return t.dialog.formItem.bsType>20&&(0==o||7==o)?a("el-option",{attrs:{label:t.$t("supplier.StatusDesc["+o+"]"),value:o}}):t._e()})],2),t._v(" "),a("p",{staticClass:"tip"},[t._v("\n                                    *(通过审核后,状态将改为指定状态, 无 则不修改)\n                                ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"未过状态",prop:"bsRejectStatus"}},[a("el-select",{staticStyle:{width:"280px"},model:{value:t.dialog.formItem.bsRejectStatus,callback:function(e){t.$set(t.dialog.formItem,"bsRejectStatus",e)},expression:"dialog.formItem.bsRejectStatus"}},[t._l(t.$t("product.StatusDesc"),function(e,o){return t.dialog.formItem.bsType<=20?a("el-option",{attrs:{label:t.$t("product.StatusDesc["+o+"]"),value:o}}):t._e()}),t._v(" "),t._l(t.$t("supplier.StatusDesc"),function(e,o){return t.dialog.formItem.bsType>20&&(0==o||7==o)?a("el-option",{attrs:{label:t.$t("supplier.StatusDesc["+o+"]"),value:o}}):t._e()})],2),t._v(" "),a("p",{staticClass:"tip"},[t._v("\n                                    *(未通过审核,状态将改为指定状态, 无 则不修改)\n                                ")])],1)],1)],1)])],1)])},r=[];o._withStripped=!0;var i={render:o,staticRenderFns:r};e.default=i}});