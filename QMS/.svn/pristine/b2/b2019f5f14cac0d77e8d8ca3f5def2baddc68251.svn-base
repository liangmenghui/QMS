webpackJsonp([34],{1194:function(e,t,a){"use strict";function o(e){d||a(2090)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1779),r=a.n(i);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);var n=a(2092),s=a.n(n),d=!1,p=a(1),u=o,c=p(r.a,s.a,!1,u,null,null);c.options.__file="src/views/qms/view/settings/ApprovedFlowManagement.vue",t.default=c.exports},1779:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(19),r=o(i),l=a(16),n=o(l);t.default={data:function(){var e=this;return{selecedtUser:{},showRooterView:!1,dialog:{modal_dialog:!1,formItem:{},ruleForm:{bsName:[{required:!0,message:"请填写名称",trigger:"blur"}],bsType:[{required:!0,message:"请填写审核类型",trigger:"blur"}],bsApprovederId:[{required:!0,message:"请选择负责人",trigger:"blur"}]}},datagrid:{queryParams:{page:1,rows:25,pkParent:-1},pagination:[25,50,100],data:{rows:[],total:0},columns:[{title:this.$t("ApprovedFlow.Process-M"),key:"bsName"},{title:this.$t("ApprovedFlow.FlowType"),key:"bsType",render:function(t,a){return t("span",e.$t("approved.type["+a.row.bsType+"]"))}},{title:this.$t("ApprovedFlow.Principal"),key:"bsApproveded",render:function(e,t){return e("span",t.row.approvedBy.bsName)}},{title:this.$t("ApprovedFlow.Operating"),key:"action",render:function(t,a){var o=[];return o.push(t("Button",{props:{type:"primary",size:"small",disabled:!e.$Util.hasPerm("EDIT")},style:{marginRight:"5px"},on:{click:function(){e.showEditDialog(a)}}},e.$t("Button.Edit"))),o.push(t("Button",{props:{type:"error",size:"small",disabled:!e.$Util.hasPerm("DELETE")},on:{click:function(){e.delete(a)}}},e.$t("Button.Delete"))),t("div",o)}}]},users:[]}},created:function(){this.getData(),this.showRooterView=this.$route.matched.length>2},beforeUpdate:function(){this.showRooterView=this.$route.matched.length>2},watch:{$route:function(e,t){this.showRooterView=e.matched.length>2}},methods:{handleSubmit:function(e){this.getData()},getData:function(){var e=this;this.api.ApprovedFlow.getlist(this.datagrid.queryParams).then(function(t){e.datagrid.data=t.data}),this.api.user.getlist().then(function(t){e.users=t.data.rows})},reloadData:function(){this.getData()},changePage:function(e){this.datagrid.queryParams.page=e,this.datagrid.data=this.getData()},delete:function(e){var t=this;this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",onOk:function(){t.api.ApprovedFlow.delete({id:e.row.id}).then(function(e){e.result?(t.reloadData(),t.$Modal.remove(),t.$Message.info("删除成功")):t.$Message.error(e.msg)})}})},showAddDialog:function(){this.dialog.formItem={bsCanYield:0,bsApprovedStatus:0,bsRejectStatus:0},this.dialog.modal_dialog=!0},showEditDialog:function(e){this.dialog.formItem=this.$Util.formattedParams(e.row),this.selecedtUser=(0,n.default)({},this.dialog.formItem.approvedBy),this.dialog.formItem.index=e.index,delete this.dialog.formItem.approvedBy,this.dialog.modal_dialog=!0},ok:function(){var e=this;this.dialog.formItem.bsApprovederId=this.selecedtUser.id,this.$refs["dialog.formItem"].validate(function(t){t?void 0!=(0,r.default)(e.dialog.formItem.id)&&"number"==typeof e.dialog.formItem.id?e.api.ApprovedFlow.edit(e.dialog.formItem).then(function(t){e.$store.commit("updateFlowDataStates",(0,n.default)(e.datagrid.data.rows[e.dialog.formItem.index],e.dialog.formItem)),e.$router.push("approvedFlowManagement/flowSettings")}):e.api.ApprovedFlow.add(e.dialog.formItem).then(function(t){t.data.approvedBy=e.selecedtUser,e.$store.commit("updateFlowDataStates",t.data),e.$router.push("approvedFlowManagement/flowSettings")}):e.$Message.info(e.$t("Error.ParamsRequire"))})},cancel:function(){}}}},2090:function(e,t,a){var o=a(2091);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(29)("84b94fec",o,!1)},2091:function(e,t,a){t=e.exports=a(28)(!1),t.push([e.i,"\n.ApprovedFlowManagement .ivu-table {\n  font-size: 14px;\n}\n.ApprovedTermsManagement .ivu-table-cell {\n  font-size: 14px;\n}\n.SampleManagement .ivu-table {\n  font-size: 14px;\n}\n.SampleRegularManagement .ivu-table {\n  font-size: 14px;\n}\n.el-textarea__inner {\n  width: 85%;\n}\n.el-form-item {\n  margin-bottom: 14px;\n}\n.searchbox {\n  width: 100%;\n  height: 40px;\n}\n.ivu-input {\n  margin-top: 14px;\n  display: inline-block;\n  width: 200px;\n  height: 38px;\n  padding: 11px 10px;\n  font-size: 12px;\n  border: 1px solid #dddee1;\n  /*border-radius: 4px;*/\n  color: #495060;\n  background-color: #fff;\n  background-image: none;\n  position: relative;\n  cursor: text;\n  /*margin-top:16px;*/\n  transition: border 0.2s ease-in-out, background 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n}\n.addform {\n  width: 480px;\n}\n.addform .el-input {\n  width: 300px;\n}\n.searchbtn .el-button {\n  border-radius: 0px;\n  padding: 11px 14px;\n}\n.toolbar .el-form--inline .el-form-item {\n  vertical-align: baseline;\n}\n.tip {\n  margin-left: 70px;\n  color: #777;\n}\n",""])},2092:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showRooterView?e.showRooterView?a("div",[a("router-view")],1):e._e():a("div",{staticClass:"ApprovedFlowManagement"},[a("div",[a("el-Row",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"medium",placeholder:e.$t("Button.Keyword-search")},model:{value:e.datagrid.queryParams.keyWord,callback:function(t){e.$set(e.datagrid.queryParams,"keyWord",t)},expression:"datagrid.queryParams.keyWord"}}),e._v(" "),a("el-button",{staticStyle:{padding:"10px 10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.handleSubmit("formQuery")}}},[e._v("\n                \t\t"+e._s(e.$t("Button.Inquire"))+"\n                \t")]),e._v(" "),a("el-button",{directives:[{name:"perm-add",rawName:"v-perm-add"}],staticStyle:{padding:"10px 10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.showAddDialog()}}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("Button.Addprocess"))+"\n\t\t\t\t\t")])],1),e._v(" "),a("el-Row",[a("el-col",{attrs:{span:24}},[a("Table",{attrs:{data:e.datagrid.data.rows,columns:e.datagrid.columns}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.datagrid.data.total,current:1,"page-size":e.datagrid.queryParams.rows,"page-size-opts":e.datagrid.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage}})],1)])],1)],1),e._v(" "),a("Modal",{attrs:{title:e.$t("ApprovedFlow.ProcessInformation")},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.dialog.modal_dialog,callback:function(t){e.$set(e.dialog,"modal_dialog",t)},expression:"dialog.modal_dialog"}},[a("p",[a("el-form",{ref:"dialog.formItem",staticClass:"addform",attrs:{model:e.dialog.formItem,rules:e.dialog.ruleForm,"label-width":"80"}},[a("el-form-item",{attrs:{label:e.$t("ApprovedFlow.Process-M"),prop:"bsName"}},[a("el-input",{model:{value:e.dialog.formItem.bsName,callback:function(t){e.$set(e.dialog.formItem,"bsName",t)},expression:"dialog.formItem.bsName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("ApprovedFlow.FlowType"),prop:"bsType"}},[a("el-select",{model:{value:e.dialog.formItem.bsType,callback:function(t){e.$set(e.dialog.formItem,"bsType",t)},expression:"dialog.formItem.bsType"}},[a("el-option",{attrs:{label:e.$t("approved.type[11]"),value:11}}),e._v(" "),a("el-option",{attrs:{label:e.$t("approved.type[12]"),value:12}}),e._v(" "),a("el-option",{attrs:{label:e.$t("approved.type[21]"),value:21}}),e._v(" "),a("el-option",{attrs:{label:e.$t("approved.type[22]"),value:22}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("ApprovedFlow.Principal"),prop:"bsApprovederId"}},[e._v("  \n                                "),a("el-select",{attrs:{placeholder:"请输入","value-key":"id"},model:{value:e.selecedtUser,callback:function(t){e.selecedtUser=t},expression:"selecedtUser"}},e._l(e.users,function(e){return a("el-option",{key:e.id,attrs:{label:e.bsName,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("approved.can_yield"),prop:"bsCanYield"}},[a("el-select",{staticStyle:{width:"280px"},model:{value:e.dialog.formItem.bsCanYield,callback:function(t){e.$set(e.dialog.formItem,"bsCanYield",t)},expression:"dialog.formItem.bsCanYield"}},[a("el-option",{attrs:{label:e.$t("approved.yield[0]"),value:0}}),e._v(" "),a("el-option",{attrs:{label:e.$t("approved.yield[1]"),value:1}})],1),e._v(" "),a("p",{staticClass:"tip"},[e._v("\n                                    *(在审核项目未是否能继续进行审核)\n                                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"通过状态",prop:"bsApprovedStatus"}},[a("el-select",{staticStyle:{width:"280px"},model:{value:e.dialog.formItem.bsApprovedStatus,callback:function(t){e.$set(e.dialog.formItem,"bsApprovedStatus",t)},expression:"dialog.formItem.bsApprovedStatus"}},[e._l(e.$t("product.StatusDesc"),function(t,o){return e.dialog.formItem.bsType<=20?a("el-option",{attrs:{label:e.$t("product.StatusDesc["+o+"]"),value:o}}):e._e()}),e._v(" "),e._l(e.$t("supplier.StatusDesc"),function(t,o){return e.dialog.formItem.bsType>20&&(0==o||7==o)?a("el-option",{attrs:{label:e.$t("supplier.StatusDesc["+o+"]"),value:o}}):e._e()})],2),e._v(" "),a("p",{staticClass:"tip"},[e._v("\n                                    *(通过审核后,状态将改为指定状态, 无 则不修改)\n                                ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"未过状态",prop:"bsRejectStatus"}},[a("el-select",{staticStyle:{width:"280px"},model:{value:e.dialog.formItem.bsRejectStatus,callback:function(t){e.$set(e.dialog.formItem,"bsRejectStatus",t)},expression:"dialog.formItem.bsRejectStatus"}},[e._l(e.$t("product.StatusDesc"),function(t,o){return e.dialog.formItem.bsType<=20?a("el-option",{attrs:{label:e.$t("product.StatusDesc["+o+"]"),value:o}}):e._e()}),e._v(" "),e._l(e.$t("supplier.StatusDesc"),function(t,o){return e.dialog.formItem.bsType>20&&(0==o||7==o)?a("el-option",{attrs:{label:e.$t("supplier.StatusDesc["+o+"]"),value:o}}):e._e()})],2),e._v(" "),a("p",{staticClass:"tip"},[e._v("\n                                    *(未通过审核,状态将改为指定状态, 无 则不修改)\n                                ")])],1)],1)],1)])],1)])},i=[];o._withStripped=!0;var r={render:o,staticRenderFns:i};t.default=r}});