webpackJsonp([35],{1220:function(t,e,r){"use strict";function a(t){u||r(2165)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(1816),s=r.n(o);for(var i in o)"default"!==i&&function(t){r.d(e,t,function(){return o[t]})}(i);var l=r(2167),n=r.n(l),u=!1,c=r(1),p=a,d=c(s.a,n.a,!1,p,null,null);d.options.__file="src/views/qms/view/product/ProductList.vue",e.default=d.exports},1816:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(11),o=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={data:function(){return{formQuery:{},tableData:[],expands:[],filters:{},showRooterView:!1,queryParams:{page:1,rows:10,pkParent:-1},pageSizesList:[10,20,30,40,50,100],totalCount:0,options1:[{value:"1",label:this.$t("product.ProductRisk[0]")},{value:"2",label:this.$t("product.ProductRisk[1]")},{value:"3",label:this.$t("product.ProductRisk[2]")},{value:"4",label:this.$t("product.ProductRisk[3]")},{value:"5",label:this.$t("product.ProductRisk[4]")}],value1:"",options2:[{value:"0",label:this.$t("product.StatusDesc[0]")},{value:"1",label:this.$t("product.StatusDesc[1]")},{value:"2",label:this.$t("product.StatusDesc[2]")},{value:"3",label:this.$t("product.StatusDesc[3]")},{value:"4",label:this.$t("product.StatusDesc[4]")}],value2:""}},watch:{$route:function(t,e){2==t.matched.length&&this.getData(),this.showRooterView=t.matched.length>2}},created:function(){this.getData(),this.showRooterView=this.$route.matched.length>2},methods:{getData:function(){var t=this,e=(0,o.default)({},this.formQuery,this.queryParams,this.$route.query);this.api.productinfo.getlist(e).then(function(e){t.tableData=e.data.rows.map(function(t){return t.disabledProductRecord=!0,t.disabledProcessRecord=!0,1==t.bsIsApprove&&t.bsProcessRecordId>t.bsProductRecordId?t.disabledProcessRecord=!1:1==t.bsIsApprove&&t.bsProcessRecordId<t.bsProductRecordId&&(t.disabledProductRecord=!1),t}),t.totalCount=e.data.total})},cleargetData:function(){this.formQuery.bsRiskLevel="",this.formQuery.bsStatus="",this.formQuery.keyWord=""},rowClick:function(t,e,r){Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},this.expands.indexOf(t.id)<0?this.expands.push(t.id):this.expands.remove(t.id)},pushToChildWithData:function(t,e){this.$store.commit("updateProductDataStates",e.row),this.$router.push({path:t})},pushToApprovedCreator:function(t,e){this.$router.push({path:t,query:{product:e.row.id,bsName:e.row.bsPrName,bsCode:e.row.bsPrCode}})},pushToProductArrovedFlow:function(t,e){this.$router.push({path:t,query:{bsFlowRecordId:e.row.bsProcessRecordId}})},pushToProdcutionCheckFlow:function(t,e){this.$router.push({path:t,query:{bsFlowRecordId:e.row.bsProductRecordId}})},changePage:function(t){this.queryParams.page=t,this.getData()},SizeChange:function(t){}}}},2165:function(t,e,r){var a=r(2166);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r(21)("e9499de4",a,!1)},2166:function(t,e,r){e=t.exports=r(20)(!1),e.push([t.i,"\n.ApprovedFlowManagement .ivu-table {\n  font-size: 14px;\n}\n.ApprovedTermsManagement .ivu-table-cell {\n  font-size: 14px;\n}\n.SampleManagement .ivu-table {\n  font-size: 14px;\n}\n.SampleRegularManagement .ivu-table {\n  font-size: 14px;\n}\n.mytable.el-table th {\n  background: #f0f0f0 !important;\n}\n.block {\n  text-align: right;\n  margin-top: 10px;\n}\n.block .clearfix {\n  width: 95%;\n  border: none;\n  margin-left: 5%;\n  padding-top: 10px;\n  padding-bottom: 25px;\n}\n.el-table .cell {\n  padding-left: 0;\n}\n",""])},2167:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showRooterView?t.showRooterView?r("div",[r("router-view")],1):t._e():r("div",{staticClass:"ProductList"},[r("Row",{staticStyle:{"margin-bottom":"10px"}},[r("Select",{staticStyle:{width:"200px",display:"inline-block","margin-top":"-4px"},attrs:{size:"large",placeholder:"按风险等级搜索"},model:{value:t.formQuery.bsRiskLevel,callback:function(e){t.$set(t.formQuery,"bsRiskLevel",e)},expression:"formQuery.bsRiskLevel"}},t._l(t.options1,function(t){return r("Option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),r("Select",{staticStyle:{width:"200px",display:"inline-block","margin-top":"-4px"},attrs:{size:"large",placeholder:"按产品状态搜索"},model:{value:t.formQuery.bsStatus,callback:function(e){t.$set(t.formQuery,"bsStatus",e)},expression:"formQuery.bsStatus"}},t._l(t.options2,function(t){return r("Option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),r("el-input",{staticStyle:{width:"200px",display:"inline-block"},attrs:{size:"medium",placeholder:t.$t("Button.Keyword-search")},model:{value:t.formQuery.keyWord,callback:function(e){t.$set(t.formQuery,"keyWord",e)},expression:"formQuery.keyWord"}}),t._v(" "),r("el-button",{staticStyle:{padding:"10px 10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v(t._s(t.$t("Button.Inquire")))]),t._v(" "),r("el-button",{staticStyle:{padding:"10px 10px"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.cleargetData}},[t._v(t._s(t.$t("Button.Reset")))])],1),t._v(" "),r("el-table",{staticClass:"productlist mytable",attrs:{data:t.tableData,"row-key":"id","expand-row-keys":t.expands},on:{"row-click":t.rowClick}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){t.pushToChildWithData("product/details",e)}}},[t._v(t._s(t.$t("product.ProductDetail")))]),t._v(" "),r("el-button",{directives:[{name:"perm-query",rawName:"v-perm-query"}],attrs:{type:"primary",size:"small"},on:{click:function(r){t.pushToChildWithData("product/riskManagement",e)}}},[t._v(t._s(t.$t("product.RiskManagement"))+"\n                      ")]),t._v(" "),r("el-button",{directives:[{name:"perm-alloc",rawName:"v-perm-alloc"}],attrs:{type:"primary",size:"small"},on:{click:function(r){t.pushToChildWithData("product/regularManagement",e)}}},[t._v(t._s(t.$t("product.regulars")))]),t._v(" "),r("el-button",{directives:[{name:"perm-verify",rawName:"v-perm-verify"}],attrs:{type:"primary",size:"small",disabled:e.row.disabledProcessRecord},on:{click:function(r){t.pushToProductArrovedFlow("product/approved",e)}}},[t._v(t._s(t.$t("product.ProductAudit"))+"\n                      ")]),t._v(" "),r("el-button",{directives:[{name:"perm-verify",rawName:"v-perm-verify"}],attrs:{type:"primary",size:"small",disabled:e.row.disabledProductRecord},on:{click:function(r){t.pushToProdcutionCheckFlow("product/approved",e)}}},[t._v(t._s(t.$t("product.ProductInspection"))+"\n                      ")]),t._v(" "),r("el-button",{directives:[{name:"perm-alloc",rawName:"v-perm-alloc"}],attrs:{type:"primary",size:"small",disabled:1==e.row.bsIsApprove},on:{click:function(r){t.pushToApprovedCreator("product/createApprovedRecord",e)}}},[t._v(t._s(t.$t("product.NewAudit"))+"\n                      ")]),t._v(" "),r("el-button",{directives:[{name:"perm-query",rawName:"v-perm-query"}],attrs:{type:"primary",size:"small"},on:{click:function(r){t.pushToChildWithData("product/approvedRecordsList",e)}}},[t._v(t._s(t.$t("product.AuditTrails")))])],1)]}}])}),t._v(" "),r("el-table-column",{attrs:{align:"left",label:t.$t("product.RiskLevel"),prop:"bsRiskLevel"}}),t._v(" "),r("el-table-column",{attrs:{align:"left",label:t.$t("product.ComponentRepresentation"),prop:"bsRiskLevel"}}),t._v(" "),r("el-table-column",{attrs:{label:t.$t("product.name"),width:"300px",prop:"bsPrName"}}),t._v(" "),r("el-table-column",{attrs:{label:t.$t("product.Type"),width:"250px",prop:"bsPrType"}}),t._v(" "),r("el-table-column",{attrs:{label:t.$t("product.SuppChieseName"),width:"270px",prop:"bsSuppChieseName"}}),t._v(" "),r("el-table-column",{attrs:{label:t.$t("product.code"),width:"150px",prop:"bsPrCode"}}),t._v(" "),r("el-table-column",{attrs:{align:"center",label:t.$t("product.Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.$t("product.StatusDesc["+e.row.bsStatus+"]")))])]}}])})],1),t._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.queryParams.page,"page-sizes":t.pageSizesList,"page-size":t.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.pageSizesList,total:t.totalCount},on:{"current-change":t.changePage,"size-change":t.SizeChange,"update:currentPage":function(e){t.$set(t.queryParams,"page",e)}}})],1),t._v(" "),r("router-view")],1)},o=[];a._withStripped=!0;var s={render:a,staticRenderFns:o};e.default=s}});