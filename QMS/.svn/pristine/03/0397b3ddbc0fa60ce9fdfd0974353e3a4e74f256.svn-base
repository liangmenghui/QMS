webpackJsonp([55],{1172:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(1752),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);var s=a(2046),n=a.n(s),l=a(1),d=l(r.a,n.a,!1,null,null,null);d.options.__file="src/view/member/userrole/index.vue",t.default=d.exports},1752:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(17),i=o(r),s=a(22),n=o(s),l=a(11),d=o(l);t.default={data:function(){return{formQuery:{bsCode:"",bsName:""},tree:{data:[{expand:!0,title:"根目录",children:[]}]},datagrid:{queryParams:{page:1,rows:25,pkParent:-1},pagination:[25,50,100],data:{rows:[],total:0},columns:[{title:"用户帐号",key:"bsCode"},{title:"用户姓名",key:"bsName"},{title:"删除标识",key:"bsIsDel",render:function(e,t){return e("span",{style:{fontColor:"red"}},0==t.row.bsIsDel?"-":"已删除")}},{title:"创建时间",key:"bsCreatedTime"},{title:"更新时间",key:"bsModifiedTime"}]}}},created:function(){this.getTree()},methods:{handleSubmit:function(e){this.getData()},getData:function(){var e=this;(0,d.default)(this.formQuery,this.datagrid.queryParams),this.api.admin.userrole.getuserlist(this.formQuery).then(function(t){t.result?e.datagrid.data=t.data:e.$Message.error(t.msg)})},reloadData:function(){this.datagrid.data=this.getData()},changePage:function(e){this.datagrid.queryParams.page=e,this.datagrid.data=this.getData()},edit:function(e){var t=this;console.log(e),this.api.admin.resrce.edit(e.row).then(function(e){console.log(e),e.result?t.reloadData():t.$Message.error(e.msg)})},delete:function(e){var t=this;console.log(e),this.$Modal.confirm({title:"提示信息",content:"<p>是否确定删除？</p>",loading:!0,onOk:function(){t.api.admin.resrce.delete({id:e.row.id}).then(function(e){console.log(e),e.result?(t.getTree(),t.reloadData(),t.$Message.info("删除成功"),t.$Modal.remove()):t.$Message.error(e.msg)})}})},showAddDialog:function(){this.dialog.modal_dialog=!0;var e=this.$refs.tree.getSelectedNodes();0==e.length?this.dialog.formItem={pkParent:-1,parentName:"根目录"}:this.dialog.formItem={pkParent:e[0].id,parentName:e[0].title}},showEditDialog:function(e){this.dialog.modal_dialog=!0;var t=e.row;this.dialog.formItem={id:t.id,bsCode:t.bsCode,bsName:t.bsName,bsUrl:t.bsUrl,bsIconCls:t.bsIconCls,bsSortNo:t.bsSortNo,bsComment:t.bsComment,bsEnableState:t.bsEnableState};var a=this.$refs.tree.getSelectedNodes();0==a.length?(0,d.default)(this.dialog.formItem,{pkParent:-1,parentName:"根目录"}):(0,d.default)(this.dialog.formItem,{pkParent:a[0].id,parentName:a[0].title})},ok:function(){var e=this;console.log("this.dialog.formItem====>"+(0,n.default)(this.dialog.formItem.id)),void 0!=(0,n.default)(this.dialog.formItem.id)&&"number"==typeof this.dialog.formItem.id?(console.log("编辑1"),console.log((0,i.default)(this.dialog.formItem)),this.$refs["dialog.ruleForm"].validate(function(t){t&&e.api.admin.resrce.edit(e.dialog.formItem).then(function(t){t.result?(e.getTree(),e.reloadData()):e.$Message.error(t.msg)})})):(console.log("新增1"),this.$refs["dialog.ruleForm"].validate(function(t){t&&e.api.admin.resrce.add(e.dialog.formItem).then(function(t){t.result?(e.getTree(),e.reloadData()):e.$Message.error(t.msg)})}))},cancel:function(){},getTree:function(){var e=this;this.api.admin.role.gettree({}).then(function(t){t.result&&(console.log(t.data),e.tree.data=t.data)})},selectNode:function(e){console.log("selected:"+(0,i.default)(e)),1!=e[0].bsLevel&&(this.datagrid.queryParams.pkParent=e[0].id,this.datagrid.data=this.getData())},getSelectedNodes:function(){this.dialog.formItem.pkParent=node[0].id,console.log((0,i.default)(this.dialog.formItem))}}}},2046:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("i-col",[a("Form",{ref:"formQuery",staticClass:"query_area",attrs:{model:e.formQuery,inline:""}},[a("Form-item",{attrs:{prop:"bsCode"}},[a("Input",{attrs:{type:"text",placeholder:"用户帐号"},model:{value:e.formQuery.bsCode,callback:function(t){e.$set(e.formQuery,"bsCode",t)},expression:"formQuery.bsCode"}})],1),e._v(" "),a("Form-item",{attrs:{prop:"bsName"}},[a("Input",{attrs:{type:"text",placeholder:"用户姓名"},model:{value:e.formQuery.bsName,callback:function(t){e.$set(e.formQuery,"bsName",t)},expression:"formQuery.bsName"}})],1),e._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formQuery")}}},[e._v("查 询")])],1)],1)],1)],1),e._v(" "),a("Row",[a("i-col",{attrs:{span:"4"}},[a("Tree",{ref:"tree",staticClass:"layout-menu-left",staticStyle:{height:"500px"},attrs:{data:e.tree.data},on:{"on-select-change":e.selectNode}})],1),e._v(" "),a("i-col",{attrs:{span:"20"}},[a("Table",{staticStyle:{height:"500px"},attrs:{data:e.datagrid.data.rows,columns:e.datagrid.columns,stripe:""}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.datagrid.data.total,current:1,"page-size":e.datagrid.queryParams.rows,"page-size-opts":e.datagrid.pagination,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage}})],1)])],1)],1)],1)},r=[];o._withStripped=!0;var i={render:o,staticRenderFns:r};t.default=i}});